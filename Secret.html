<!--created by henry-->
<!DOCTYPE html>
<html>
    <head>
        <title>Cube Adventure</title>
    </head>
    <body>
        <canvas id="canvas1" 
   width="400" height="320"></canvas> 
<style>
    /*style here*/
    /*canvas{
        border-style:solid;
    }
    .changeDirectButton{
    position:absolute;
    left:35%;
        background-color:gray;
1        margin:7px;
        color:lightGray;
        border-width:3px;

        border-height:4px;
        border-radius:50px;
    }
    #directionFacing{
        font-weight:bolder;
        position:absolute;
        left:33%;
        top:50%;
    }*/
</style>
   <script>
   var canvas = document.getElementById("canvas1");    
      var ctx = canvas.getContext("2d");
      
      //constant
      const GAME_WIDTH = canvas.width;
      const GAME_HEIGHT = canvas.height;
      
      //keep the game working
      var gameLive = true;

      //needed for classes(because i code python a lot)
      var self = this;

      //needed to know what level you enter
      var enteredLevel = {
          level1: false,
          level2: false,
          level3: false
      }

      //needed to create a coming soon board
      var enteredComingSoonObject = false;

      //position standing
      var positionStanding = "Main Menu";

      //needed to hide all rect
      var isAllHidden = false;
      
      //levels
      var levelsIsHidden = true;





















      //declare levels
      var levelColumn = 3
      var levels = [];
      for(var c=0; c<levelColumn; c++){
          levels[c] = {
          x: 0,
           y: 110,
            sizeX: 100,
            sizeY: 100,
            padding: 10,
            offset: 30}
      }

      //create a confirm screen
      var cofirmScreen = {
          x: GAME_WIDTH/2,
          y: GAME_HEIGHT/2,
          isHidden: true,
          playerConfirmed: false,
          sizeX: 100,
          sizeY: 100
      }

      //player object
      var player = {
          speed: 2,
          x: GAME_WIDTH-390,
          y: GAME_HEIGHT/2-10,
          //moving boolean
          isMoving: false,
          //to tell you what direction face you are facing
          directionFacing: 1,
color: "black",
          sizeX: 25,
          sizeY: 20
      };
      
      //white blocks
      var whiteBlocks = {
          x: 63,
          y: GAME_HEIGHT/3+16,
          isHidden: true,
          sizeX: 75,
          sizeY: 75
          
      }

      //create a play object
      var playRect = {
          x: 370,
          y: 100,
          isHidden: false,
          sizeY: 100,
          sizeX: 20
      }

      //the select difficulty object
      var selectDifficulty = {
          x: 140,
          y: 10,
          //isHidden used to create collision and hide it
          isHidden: false,
          //this two used to change the color when whe change the diffculty
          color: "black",
          difficultySelected: "easy",
          sizeY: 20,
          sizeX: 100
      };
      
      //create an obstacle
     /* var obstacle = {
          x: 40,
          y: GAME_HEIGHT/3,
          isHidden: true,
          sizeX: 35,
          sizeY: 25
      }*/
      
      //draw the difficulty
      var difficulty = {
          x:120,
          y:120,
          isHidden: true,
          sizeX: 65,
          sizeY: 65
      }

      //an exit object to let you exit the room
      var exitRect = {
          x: 10,
          y: 300,
          isHidden: true,
          sizeY: 15,
          sizeX: 85
      }
      
      //create an AI and you can activate it if you want
     /* function playAI(){
      var PlayAI = {
          speed: player.speed,
          x: player.x,
          y: player.y,
          color: player.color,
          sizeX: player.sizeX,
          sizeY: player.sizeY
      }
      function drawplayerAI(){
          ctx.beginPath();
          ctx.rect(PlayAI.x, PlayAI.y, PlayAI.sizeX, PlayAI.sizeY);
          ctx.fillStyle = PlayAI.color;
          ctx.fill();
          ctx.closePath();
      }
      var AItasks = [];
      AItasks[0] = "go to the play rect";
      var runAI = function(){
         PlayAI.x += speed;
         if(playAI.x+PlayAI.sizeX >= playRect.x){
             AItasks[0] = "completed";
         }
      }
      }*/
      






















      //create canvas eventListener
      canvas.addEventListener("touchstart", touchHandling);
      canvas.addEventListener("touchend", touchEndHandling);

      //touch handling function
      function touchHandling(){
          player.isMoving = true;
      }
      function touchEndHandling(){
          player.isMoving = false;
      }
      
      //change the direction you are facing
      function controlsHandling(){
      if(player.directionFacing <= 4){
          player.directionFacing += 1;
          }
          if(player.directionFacing == 5){
              player.directionFacing = 1;
          }
      }
















      //draw the player
      function drawPlayer(){
      ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.beginPath();
          ctx.rect(player.x, player.y, player.sizeX, player.sizeY);
          ctx.fillStyle = player.color;
          ctx.fill();
          ctx.closePath();
      }
      
      //create the coming soon board function, if there's any coming soon feature, this will appear
      var comingSoonBoard = function(){
      if(enteredComingSoonObject){
          ctx.font = "50px Arial";
          ctx.fillStyle="black";
          ctx.fillText("coming soon...", 30, 180);
          ctx.font = "20px Arial";
          ctx.fillText("please wait", 130, 220);
          }
          }
          
          












          function level1_update(){
          if(enteredLevel.level1){
          exitRect.isHidden = true;
                player.x = 195;
                player.y = 300;
                }
          }














          
      //draw levels
      function drawLevels(){
          for(var c=0; c<levelColumn; c++){
          if(levelsIsHidden == false){
              var levelX = (c*(levels[c].sizeX+levels[c].padding))+levels[c].offset+20;
              levels[c].x = levelX;
              ctx.beginPath();
              ctx.rect(levels[c].x, levels[c].y, levels[c].sizeX, levels[c].sizeY);
              ctx.fillStyle = "darkGray";
              ctx.fill();
              ctx.closePath();
              }
          }
      }

     /* //create a triangle to point where whe look
      function drawTri(){
          ctx.beginPath();
          ctx.lineTo();
          ctx.moveTo();
          ctx.moveTo();
          ctx.closePath();
      }*/

      //create a exit rect
      function drawExit_Rect(){
          if(exitRect.isHidden == false){
              ctx.beginPath();
              ctx.rect(exitRect.x, exitRect.y, exitRect.sizeX, exitRect.sizeY);
              ctx.fillStyle = "red";
              ctx.fill();
              ctx.closePath();
              ctx.font = "18px Arial";
              ctx.fillStyle = "black";
              ctx.fillText("e  x   i   t", 20, 313);
          }
      }
      
      //white blocks
      function drawWhite_blocks(){
      if(whiteBlocks.isHidden == false){
          ctx.beginPath();
          ctx.rect(whiteBlocks.x, whiteBlocks.y, whiteBlocks.sizeX, whiteBlocks.sizeY);
          ctx.rect(whiteBlocks.x+110, whiteBlocks.y, whiteBlocks.sizeX, whiteBlocks.sizeY);
          ctx.rect(whiteBlocks.x+220, whiteBlocks.y, whiteBlocks.sizeX, whiteBlocks.sizeY);
          ctx.fillStyle = "white";
          ctx.fill();
          ctx.closePath();
          ctx.font = "20px Arial";
          ctx.fillStyle = "black";
          ctx.fillText("Level 1", whiteBlocks.x+9, whiteBlocks.y+42);
          ctx.fillText("Level 2", whiteBlocks.x+116, whiteBlocks.y+42);
          ctx.fillText("Level 3", whiteBlocks.x+227, whiteBlocks.y+42);
          }
      }

      //draw the play object
      function drawPlayRect(){
          if(playRect.isHidden == false){
              ctx.beginPath();
              ctx.rect(playRect.x, playRect.y, playRect.sizeX, playRect.sizeY);
              ctx.fillStyle = "green";
              ctx.fill();
              ctx.closePath();
              ctx.font = "18px Arial";
              ctx.fillStyle = "black";
              ctx.fillText("P", playRect.x+5, playRect.y+30);
              ctx.fillText("L", playRect.x+5.50, playRect.y+47);
              ctx.fillText("A", playRect.x+5, playRect.y+65);
              ctx.fillText("Y", playRect.x+5, playRect.y+85);
          }
      }

      //generate level1
      /*function level_1_generator(){
          var drawObstacles = function(){
              ctx.beginPath();
              ctx.rect(obstacle.x, obstacle.y, obstacle.sizeX, obstacle.sizeY);
              ctx.fillStyle = "darkGray";
              ctx.fill();
              ctx.closePath();
          }
      }*/

      //create the selectDifficulty rect
      function draw_selectDifficulty_Rect(){
      if(selectDifficulty.isHidden == false){
          ctx.beginPath();
          ctx.rect(selectDifficulty.x, selectDifficulty.y, selectDifficulty.sizeX, selectDifficulty.sizeY);
          ctx.fillStyle = selectDifficulty.color;
          ctx.fill();
          ctx.closePath();
          ctx.font = "13px Arial";
          ctx.fillStyle="black";
          ctx.fillText("change difficulty", 142, 22)
          }
      }

      //draw difficuties
/*function drawDifficulties(){
    ctx.beginPath();
    ctx.rect(difficulty.x, difficulty.y, difficulty.sizeX, difficulty.sizeY);
    ctx.fillStyle = "darkGray";
    ctx.rect(difficulty.x+20, difficulty.y+20, difficulty.sizeX, difficulty.sizeY);
    ctx.fill();
    ctx.closePath();
}*/

















      //update the game
      if(gameLive){
      function update(){
          drawPlayer();
          /*drawTri();*/
          draw_selectDifficulty_Rect();
          /*drawDifficulties();*/
          drawExit_Rect();
          comingSoonBoard();
          drawPlayRect();
          drawLevels();
          drawWhite_blocks();
          /*level1_update();*/
          //you can't move over the game
if(positionStanding != "level1" || positionStanding != "level2" || positionStanding != "level3"){
          if(player.x + player.sizeX < GAME_WIDTH && player.directionFacing == 1){
          if(player.isMoving){
              player.x = player.x + player.speed;
              }
              }
              if(player.x >= 1 && player.directionFacing == 2){
              if(player.isMoving){
                  player.x -= player.speed;
                  }
              }

              if(player.y >= 1 && player.directionFacing == 3){
                  if(player.isMoving){
                      player.y -= player.speed;
                  }
              }
              if(player.y + player.sizeY < GAME_HEIGHT && player.directionFacing == 4){
              if(player.isMoving){
                  player.y += player.speed
                  }
              }
}
if(positionStanding == "level1"){
   // if
}
              //to make all rect hidden
              if(isAllHidden){
                  selectDifficulty.isHidden = true;
                  playRect.isHidden = true;
                  exitRect.isHidden = false;
              }
              if(isAllHidden == false){
                  selectDifficulty.isHidden = false;
                  playRect.isHidden = false;
                  exitRect.isHidden = true;
              }
              directionUpdate();

        //check your collision with the object
if(selectDifficulty.isHidden == false){
if (player.x < selectDifficulty.x + selectDifficulty.sizeX && player.x + player.sizeX > selectDifficulty.x && player.y < selectDifficulty.y + selectDifficulty.sizeY && player.sizeY + player.y > selectDifficulty.y) { 
            
            isAllHidden = true;
            positionStanding = "select difficulty room";
            enteredComingSoonObject = true;
}
}
/*
if(PlayAI.x < playRect.x + exitRect.sizeX && PlayAI.x + PlayAI.sizeX > exitRect.x && PlayAI.y < playRect.y + playRect.sizeY && PlayAI.sizeY + PlayAI > playRect.y){
    
}
*/
        if(exitRect.isHidden == false){
        if (player.x < exitRect.x + exitRect.sizeX && player.x + player.sizeX > exitRect.x && player.y < exitRect.y + exitRect.sizeY && player.sizeY + player.y > exitRect.y) {
if(positionStanding == "level1" || positionStanding == "level2" || positionStanding == "level3"){
    levelsIsHidden = false;
    whiteBlocks.isHidden = false;
    player.x = GAME_WIDTH/2;
    player.y = 20;
    enteredComingSoonObject = false;
    positionStanding = "play room";
}
else{
            enteredComingSoonObject = false;
            isAllHidden = false;
            levelsIsHidden = true;
            whiteBlocks.isHidden = true;
            player.x = GAME_WIDTH/2;
            player.y = GAME_HEIGHT/2;
            }
        }
}
//change the color when whe change the difficulty
if(selectDifficulty.difficultySelected == "easy"){
              selectDifficulty.color = "blue";
          }
          if(selectDifficulty.difficultySelected == "normal"){
              selectDifficulty.color = "green";
          }
          if(selectDifficulty.difficultySelected == "hard"){
              selectDifficulty.color = "orange";
          }
          if(selectDifficulty.difficultySelected == "harder"){
              selectDifficulty.color = "lightRed";
          }
          if(selectDifficulty.difficultySelected == "insane"){
              selectDifficulty.color = "purple";
          }
          if(selectDifficulty.difficultySelected == "extreme"){
              selectDifficulty.color = "darkRed";
          }
if(levelsIsHidden == false){
        if (player.x < levels[0].x + levels[0].sizeX && player.x + player.sizeX > levels[0].x && player.y < levels[0].y + levels[0].sizeY && player.sizeY + player.y > levels[0].y){
            levelsIsHidden = true;
            whiteBlocks.isHidden = true;
            enteredLevel.level1 = true;
            positionStanding = "level1";
            exitRect.isHidden = true;
        } 
        if (player.x < levels[1].x + levels[1].sizeX && player.x + player.sizeX > levels[1].x && player.y < levels[1].y + levels[1].sizeY && player.sizeY + player.y > levels[1].y){
            levelsIsHidden = true;
            whiteBlocks.isHidden = true;
            enteredComingSoonObject = true;
            enteredLevel.level2 = true;
            positionStanding = "level2";
        }
        if (player.x < levels[2].x + levels[2].sizeX && player.x + player.sizeX > levels[2].x && player.y < levels[2].y + levels[2].sizeY && player.sizeY + player.y > levels[2].y){
            levelsIsHidden = true;
            whiteBlocks.isHidden = true;
            enteredComingSoonObject = true;
            enteredLevel.level3 = true;
            positionStanding = "level3";
        }
        }
        if(playRect.isHidden == false){
            if (player.x < playRect.x + playRect.sizeX && player.x + player.sizeX > playRect.x && player.y < playRect.y + playRect.sizeY && player.sizeY + player.y > playRect.y){
           isAllHidden = true;
           levelsIsHidden = false;
           whiteBlocks.isHidden = false;
           player.x = GAME_WIDTH/2;
           player.y = 20;
           positionStanding = "play room"
        }
        }
      }

















      //update you the direction you are facing
    function directionUpdate(){
      var directionString = "";
if(positionStanding != "level1"){
      if(player.directionFacing == 1){
      directionString = "east";
      }
      if(player.directionFacing == 2){
          directionString = "west";
      }
      if(player.directionFacing == 3){
          directionString = "north";
      }
      if(player.directionFacing == 4){
          directionString = "south";
      }
}
if(player.directionFacing == 7){
    directionString = "right";
}
if(player.directionFacing == 8){
    directionString = "left";
}
      document.getElementById("directionFacing").innerHTML = "Direction facing: " + directionString;
      }
      }
function randomColor(){
    player.color = "#"+((1<<24)*Math.random()|0).toString(16);
}
      //update every 10 milisecond
      setInterval(update, 10);
setInterval(randomColor, 250);
/*~~else~~*/
/*created by khang tran*/
/*created by 21 else if element and and still increses because this AI is just on beta version and still upgrading*/
//this programs still in development...

alert("this is my biggest project, this project just been programmed in 1 day so there will be a lot of bugs, but im still working on them so they will be better, if you want to suggest some feature or more question you would like to have, please comment, also this is created to celebrate that i have 3 certificate, anyway if you like. please give an upvote")

/*"in development code" don't run it yet. im still working on them it will be finish 1 or two days later, so you can access it*/
/*alert("Version 1.0 whats new on this version?, new to do list, do math, clock, stopwatch");
               */
                 function RateMachine(){
                var Expession = prompt("how do you feel about this Robot? type very unsatisfied, unsatisfied, normal, satisfied, very satisfied");
                if(Expession == "very unsatisfied" || Expession == "unsatisfied"){
                    var Problem = prompt("whats wrong with this bot?");
                    alert("ok, we will trying to fix this problem");
                    }
                    else if(Expession == "normal"){
                        alert("okay");
                    }
                    else if(Expression == "satisfied" || Expression == "very satisfied"){
                        alert("great, thanks!");
                        Convo();
                    }
                    else{
                        alert("thats not the rate word")
                    } 
            }
function Settings(){
    var Botname = prompt("Hi, before talking with me can you do for me one thing?, my default name is 'alexa', do you want to rename me?, if not you can type 'default' to keep my default name");
    if(Botname === "Dick" || Botname === "Fuck" || Botname  === "Bitch" || Botname === "Shit" || Botname === "Crap" || Botname === "dick" || Botname === "fuck" || Botname === "bitch" || Botname === "shit" || Botname === "crap" || Botname === "Penis" || Botname === "penis" || Botname === "Boob" || Botname === "boob" || Botname === "Boobs" || Botname === "boobs"){
            alert(" Sorry, you can't use words like that!");
        
        Settings()
        }
    else if(Botname == "default" || Botname == "Default"){Botname = "Alexa"
    alert("thanks")}
    else if(Botname == "null"){
        alert("i need a name!!");
        Settings();
    }
    else{
    alert("thanks!");
    }
    var Yourname = prompt("what would you like me to call you?");
    if(Yourname === "Dick" || Yourname === "Fuck" || Yourname === "Bitch" || Yourname === "Shit" || Botname === "Crap" || Yourname === "dick" || Yourname === "fuck" || Yourname === "bitch" || Yourname === "shit" || Yourname === "crap" || Yourname === "Penis" || Yourname === "penis" || Yourname === "Boob" || Yourname === "boob" || Yourname === "Boobs" || Yourname === "boobs"){
            alert(" you can't use words like that!, type another name.");
        
        Settings()
        }
    else if(Yourname == "null"){
        Yourname = "user"
    }
    alert("hi " + Yourname + " i'm " + Botname + " let's start the chat");
    Convo();
function Convo(){
    var Question = prompt(Botname + " is waiting for you to say something...");
    if(Question === "Dick" || Question === "Fuck" || Question === "Bitch" || Question === "Shit" || Question  === "Crap" || Question  === "dick" || Question === "fuck" || Question === "bitch" || Question === "shit" || Question === "crap" || Question === "Penis" || Question  === "penis" || Question  === "Boob" || Question === "boob" || Question === "Boobs" || Question === "boobs"){
            alert(" don't say things like that!");
        
        Convo()
        }
    else if(Question == "how are you" || Question == "How are you" || Question == "how are you?" || Question == "How are you?"){
    alert("im great thanks. how are you?")
        var Answer = prompt("how are you?")
        if(Answer == "good" || Answer == "Good" || Answer == "great" || Answer == "Great"){
            alert("well, thats good to hear " + Yourname);
            }
            else if(Answer == "not good" || Answer == "Not good"){
                alert("really?, is there anything i can help?");
            }
            else{
                alert("okay");
            }
            Convo();
            }
            else if(Question == "hello" || Question == "Hello" || Question == "hi" || Question == "Hi" || Question == "Hey" || Question == "hey"){
                alert("hi " + Yourname + "! i'm " + Botname + "!");
            }
            else if(Question == "how old are you" || Question == "How old are you" || Question == "how old are you?" || Question == "How old are you?"){
                alert("i'm always here to help you forever!");
                Convo();
            }
            else if(Question == "help" || Question == "Help"){
                alert("you can type lots of things like: types normal day question, types goodbye, bye or cya to stop chatting with AI. 'bonus' you can type rate to rate this bot.");
                /*in development code
                alert("[VERSION 1.0] you can type : make a to do list to make a to do list, to do list to show you the to do listl, do math to do some math, play quiz to play quiz.");*/
                Convo();
            }
            else if(Question == "cya" || Question == "Cya" || Question == "bye" || Question == "Bye" || Question == "goodbye" || Question == "Goodbye"){
                alert("cya later " + Yourname);
            }
            else if(Question == "what are you" || Question == "What are you" || Question == "What are you?" || Question == "what are you?"){
                alert("i'm an AI")
            }
            else if(Question == "who are you" || Question == "Who are you" || Question == "who are you?" || Question == "Who are you?"){
                alert("i'm " + Botname + " of Course!")
            }
            else if(Question == "do you like cartoons" || Question == "Do you like cartoons" || Question == "Do you like cartoons?" || Question == "do you like cartoons?"){
                alert("Yes, i do!");
                Convo();
            }
            else if(Question == "what cartoon movie    do you like" || Question == "What cartoon movie do you like" || Question == "what cartoon movie do you like?" || Question == "What cartoon movie do you like?"){
                alert("i like simpsons, what do you like?");
                prompt("What cartoon movie do you like?");
                alert("great!");
                Convo();
            }
            else if(Question == "am i fat" || Question == "Am i fat" || Question == "am i fat?" || Question == "Am i fat?"){
                alert("no, not at all");
                Convo();
            }
            else if(Question == "who created you" || Question == "Who created you" || Question == "who created you?" || Question == "Who created you?"){
                alert("khang tran user created me!");
                Convo();
            }
            else if(Question == "im going to sleep" || Question == "Im going to sleep" || Question == "i'm going to sleep" || Question == "I'm going to sleep"){
                alert("well, good night!");
            }
            else if(Question == "i have to go" || Question == "I have to go"){
                alert("goodbye, " + Yourname + "!")
            }
            else if(Question == "what is my name" || Question == "What is my name" || Question == "what is my name?" || Question == "What is my name?"){
                alert("you are " + Yourname + " of course!");
                Convo();
            }
            else if(Question == "stupid" || Question == "Stupid"){
                alert("im sorry because im not smart enough to answer those question but i have developed only 1 day, so im pretty dumb, if you want suggest some feature please comment!");
                Convo();
            } 
            else if(Question == "how long have you been created" || Question == "How long have you been created" || Question == "How long have you been created?" || Question == "how long have you been created?"){
                alert("i have been created since 23/2/2020 it has been only 1 day from now!");
                Convo();
            }
            else if(Question == "how long do i have to wait for the next update?" || Question == "How long do i have to wait for the next update?" ){
                alert("if you're talking about massive update, then 4 days, 3 days for sections update, 2 days for big update, 1 day if it's a normal update");
                Convo();
            }
            else if(Question == "how long does it take to release the original update" || Question == "How long does it take to release the original update"){
                alert("well. my creator told me that before relasing the original update he will release the alpha update first, the original update will be release when the three sections are done");
                Convo();
            }
            else if(Question == "rate" || Question == "Rate"){
                 RateMachine();
            }
            else if (Question == "what are you doing?" || Question == "What are you doing?"){
                alert("im talking with you, right now!");
                Convo();
            }
            else if (Question == "what do you think?" || Question == "What do you think?"){
                alert("thinking the answer to answer to you now!");
                Convo();
            }
            else if(Question == "are you a girl?" || Question == "Are you a girl?"){
                alert("yes, i am");
            }
            else if(Question == "are you alone?" || Question == "Are you alone?"){
                alert("i think this is my personal information, so dont ask again , okay!");
                Convo();
                }
            else if(Question == "make a to do list" || Question == "Make a to do list"){
                ToDo();
            }
            else if(Question == "good morning" || Question == "Good morning"){
                alert("morning " + Yourname);
            }
            else if(Question == "How's your day?" || Question == "how's your day?"){
                alert("good, talking with you is always fun!");
                Convo();
            }
            else if(Question == "what have you done today?" || Question == "What have you done today"){
                alert("today i have talked with you");
                Convo();
            }
            else if(Question == "do you have a friend?" || Question == "Do you have a friend?"){
                alert("you are my best friend!");
                
            }
            else if(Question == "do you happy today?" || Question == "Do you happy today?"){
                alert("talking with you is my happinest ;D");
                Convo();
            }
            else if(Question == "where are you from?" || Question == "Where are you from?"){
                alert("my original is from vietnam and khang tran created me, my birthday is 23/2/2020");
                Convo();
            }
            /*else if(Question == "play quiz" || Question == "Play quiz"){
            QuizGenerator();
            }*/
            /*else if(Question == "Do math" || Question == "do math"){
                DoMath();
            }*/
            else if(Question == "make a to do list" || Question == "Make a to do list"){
                ListGenerator();
            }
            else if(Question == "to do list" || Question == "To do list"){
                alert(ToDoList);
                Convo();
            }
            else{
                alert("Im sorry. i dont know how to Answer to that yet, please check if there's missing Question mark or something, maybe you can comment what you want this AI to do so i can make this AI better. or type help for help.")
                Convo();
            }
var ToDoListN = new Array();
var ToDoListE = new Array();
var ToDoListME = new Array();
    function ListGenerator(){
var DeclareL = prompt("do you really want to run the List Generator?, type yes or no, type help to use some useful help");
    if(DeclareL == "no" || DeclareL == "No"){
    alert("ok");
        Convo();
    }
    else if(DeclareL == "help" || DeclareL == "Help"){
        alert("if you're in this to do list funtion type no or in the nothing to put nothing into the to do object and also bring you back to the Convosation");
        ListGenerator();
    }
    else if(DeclareL == "yes" || DeclareL == "Yes")
    {
      ToDoListN[0] = prompt("enter the first to do object into the to do list or type nothing to exit");
      if(ToDoListN[0] == "nothing" || ToDoListN[0] == "Nothing")
      {
          ToDoListN[0] = " ";
          Convo();
      }
      else{
           ToDoListN[1] = prompt("enter the second to do object into the to do list or type nothing to exit");
      if(ToDoListN[1] == "nothing" || ToDoListN[1] == "Nothing")
      {
          ToDoListN[1] = " ";
          Convo();
      }
      else{
          ToDoListN[2] = prompt("enter the third to do object into the to do list or type nothing to exit");
      if(ToDoListN[2] == "nothing" || ToDoListN[2] == "Nothing")
      {
          ToDoListN[2] = " ";
          Convo();
      }
      else{
           ToDoListN[3] = prompt("enter the fourth to do object into the to do list or type nothing to exit");
      if(ToDoListN[3] == "nothing" || ToDoListN[3] == "Nothing")
      {
          ToDoListN[3] = " ";
          Convo();
      }
      else{
          ToDoListN[4] = prompt("enter the fifth to do object into the to do list or type nothing to exit");
      if(ToDoListN[4] == "nothing" || ToDoListN[4] == "Nothing")
      {
          ToDoListN[4] = " ";
          Convo();
      }
      else{
           ToDoListN[5] = prompt("enter the sixth to do object into the to do list or type nothing to exit");
      if(ToDoListN[5] == "nothing" || ToDoListN[5] == "Nothing")
      {
          ToDoListN[5] = " ";
          Convo();
      }
      else{
           ToDoListN[6] = prompt("enter the seventh to do object into the to do list or type nothing to exit");
      if(ToDoList[6] == "nothing" || ToDoListN[6] == "Nothing")
      {
          ToDoListN[6] = " ";
          Convo();
      }
      else{
           ToDoListN[7] = prompt("enter the eighth to do object into the to do list or type nothing to exit");
      if(ToDoListN[7] == "nothing" || ToDoListN[7] == "Nothing")
      {
          ToDoListN[7] = " ";
          Convo();
      }
      else{
           ToDoListN[8] = prompt("enter the nineth to do object into the to do list or type nothing to exit");
      if(ToDoList[8] == "nothing" || ToDoListN[8] == "Nothing")
      {
          ToDoListN[8] = " ";
          Convo();
      }
      else{
         ToDoListN[9] = prompt("enter the tenth to do object into the to do list or type nothing to exit");
      if(ToDoList[9] == "nothing" || ToDoListN[9] == "Nothing")
      {
          ToDoListN[9] = " ";
          Convo();
      }
      else{
        ExtendToDoList();
      }  
      }
      }
      }
      }
      } 
      }
      } 
      }
      }
      Convo();  
    }
    else{
        alert("type yes, no or help!");
        ListGenerator();
    }
}
 function ExtendToDoList(){
         var DeclareI = prompt("the maximum capacity of the to do list is 10 do you want to upgrade it to to do list Extend? type yes or no");
         if(DeclareI == "no" || DeclareI == "No"){
             alert("okay");
             Convo();
         } 
         else if(DeclareI == "yes" || DeclareI == "Yes"){
         
         }
         else{
             alert("please, enter yes or no.")
         }
         }
}
}
//~~else~~
var canvas = document.getElementById("canvas1");    
      var ctx = canvas.getContext("2d");      
      var x = canvas.width/2;     
   var y = canvas.height-30;   
   var dy = -2;   
   var dx = 2;   
   var ballRadius = 10;   
   var paddleHeight = 10;   
   var paddleWidth = 75;   
   var paddleX = (canvas.width-paddleWidth)/2;   
   var leftPressed = false;
   var rightPressed = false;
   var brickRowCount = 3;
   var brickColumnCount = 5;
   var brickWidth = 75;
   var brickHeight = 20;
   var brickPadding = 10;
   var brickOffsetTop = 30;
   var brickOffsetLeft = 30;
   var score = 0;
   
   var bricks = [];
   for(var c=0; c<brickColumnCount; c++){
       bricks[c] = [];
        for(var r=0; r<brickRowCount; r++){
            bricks[c][r] = { x: 0, y: 0, status: 1}
        }
   }
   
   document.addEventListener("keydown", keyDownHandler, false);
   document.addEventListener("keyup", keyUpHandler, false);
   document.addEventListener("mousemove", mouseMoveHandler, false);
   
   function keyDownHandler(e){
       if(e.key == "Left" || e.key == "ArrowLeft"){
           leftPressed = true;
       }
       else if(e.key == "Right" || e.key == "ArrowRight"){
           rightPressed = true;
       }
   }
   
   function keyUpHandler(e){
       if(e.key == "Left" || e.key == "ArrowLeft"){
           leftPressed = false;
       }
       else if(e.key == "Right" || e.key == "ArrowRight"){
           rightPressed = false;
       }
   }
   
   function mouseMoveHandler(e){
       var relativeX = e.clientX - canvas.offsetleft;
       if(relativeX > 0 && relativeX < canvas.width){
           paddleX = relativeX - paddleWidth/2;
       }
   }
   
   function collisionDetection(){
       for(var c=0; c<brickColumnCount; c++){
           for(var r=0; r<brickRowCount; r++){
               var b = bricks[c][r];
               if(b.status == 1){
               if(x > b.x && x < b.x+brickWidth && y > b.y && y < b.y+brickHeight){
                   dy = -dy;
                   b.status = 0;
                   score++;
                   if(score == brickColumnCount*brickRowCount){
                       alert("you win!, congratulations!");
                       document.location.reload();
                       clearInterval(interval);
                   }
               }
           }
       }
   }
   }
   
   function drawScore(){
       ctx.font = "16px Arial";
       ctx.fillStyle = "#0095DD";
       ctx.fillText("Score: "+ score, 8, 20);
   }
   
   function drawBricks(){
   for(var c=0; c<brickColumnCount; c++){
       for(var r=0; r<brickRowCount; r++){
       if(bricks[c][r].status == 1){
       var brickX = (c*(brickWidth+brickPadding))+brickOffsetLeft;
       var brickY = (r*(brickHeight+brickPadding))+brickOffsetTop;
           bricks[c][r].x = brickX;
           bricks[c][r].y = brickY;
           ctx.beginPath();
           ctx.rect(brickX, brickY, brickWidth, brickHeight);
           ctx.fillStyle = "#0095DD";
           ctx.fill();
           ctx.closePath();
           }
       }
   }
   }
   
   function drawPaddle(){
       ctx.beginPath();
       ctx.rect(paddleX, canvas.height-paddleHeight, paddleWidth, paddleHeight);
       ctx.fillStyle = "#0095DD";
       ctx.fill();
       ctx.closePath();
   }
   
   function drawBall(){
       ctx.beginPath();
      ctx.arc(x, y, ballRadius, 0, Math.PI*2);
      ctx.fillStyle = "#0095DD";
      ctx.fill();
      ctx.closePath();
      }
      function draw(){
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawBall();
      drawPaddle();
      drawBricks();
      collisionDetection();
      drawScore();
      
      if(y + dy < ballRadius){
          dy = -dy;
      } 
      else if(y + dy > canvas.height-ballRadius){
      if(x > paddleX && x < paddleX + paddleWidth){
              dy = -dy;
      }
   else{
       alert("GAME OVER!");
       document.location.reload();
       clearInterval(interval);
   }
  }
   if(x + dx < ballRadius || x + dx > canvas.width-ballRadius){
       dx = -dx;
   }
   if(leftPressed && paddleX > 0){
       paddleX -= 7
   }
   else if(rightPressed && paddleX < canvas.width - paddleWidth){
       paddleX += 7;
   }
       x += dx;
       y += dy;
       }
   var interval = setInterval(draw, 10);
//~~else~~
var canvas = document.getElementById("canvas");
            var ctx = canvas.getContext("2d");
            
            var isJumping = false;
            
            canvas.addEventListener("touchstart", jumpHandling, false);
            
            ctx.rect(0, 0, 600, 400);
            ctx.fillStyle = "#3DC5FF";
            ctx.fill();
            
            function update(){
                drawBird();
            }
            
            function randomHeight(){
                var randomHeight = Math.random()*145;
                console.log(randomHeight);
            }
            setInterval(randomHeight, 1245);
            setInterval(drawBlocks, 1245);
            setInterval(update, 10);
//------else-------
// Created by henry

'use strict';

/*

https://code.sololearn.com/Www1jK4TAZ9V/?ref=app
https://code.sololearn.com/WS3YqdmYczG5/?ref=app


  91 -  134:    Animation template
 141 -  194:    Game loop
 232 -  247:    Toast messages
 250 -  274:    Coin display
 277 -  292:    Info display
 295 -  463:    Stats
 469 -  666:    Shop
 692 -  763:    Sprite class
 776 -  900:    Mage class
 907 -  951:    Enemy class
 963 -  995:    Projectile class
1010 - 1028:    Coin class
1034 - 1139:    Map class
1150 - 1416:    Minimap class
1437 - 1601:    Controls class
1622 - 1764:    DOM Elenment class
1789 - 1803:    Interval class
1808 - 1886:    Class functions
1920 - 1935:    Camera focus
1939 - 1982:    Block effects
1987 - 2065:    Mage - Block collision
2072 - 2090:    Mage - Coin collision
2097 - 2149:    Projectile collision
2153 - 2171:    Enemy collision
2230 - 2277:    Keyboard controls
2284 - 2380:    Map initialization
2391 - 2427:    Level loading
2435 - 2573:    Sprite + Level data
2576 - 2584:    Image slicing



  93 -   96:  [function]  update_fps
  98 -  103:  [function]  init_fps
 105 -  112:  [function]  init_canvas
 114 -  120:  [function]  main
 123 -  125:  [function]  clear
 154 -  173:  [function]  setup
 175 -  183:  [function]  update
 185 -  192:  [function]  draw
 252 -  272:  [function]  create_coin_counter
 353 -  399:  [function]  set_mana
 402 -  448:  [function]  set_health
 450 -  461:  [function]  update_stats
 477 -  522:  [class]     ScrollSelector
 695 -  761:  [class]     Sprite
 779 -  895:  [class]     Mage
 909 -  944:  [class]     Enemy
 965 -  990:  [class]     MageBullet
1012 - 1023:  [class]     Coin
1042 - 1137:  [class]     Map
1161 - 1303:  [class]     Minimap
1439 - 1599:  [class]     Joystick
1624 - 1750:  [class]     Element
1791 - 1801:  [class]     Interval
1810 - 1845:  [function]  spawn_enemies
1847 - 1860:  [function]  spawn_coins
1863 - 1869:  [function]  delete_all_coins
1871 - 1877:  [function]  delete_all_bullets
1879 - 1885:  [function]  delete_all_enemies
1899 - 1901:  [function]  pause
1903 - 1905:  [function]  resume
1909 - 1916:  [function]  equals
1922 - 1933:  [function]  handle_mage_at_screen_edges
1941 - 1979:  [function]  block_collisions
1989 - 2063:  [function]  handle_mage_collisions
2075 - 2088:  [function]  handle_mage_coins_collisions
2099 - 2147:  [function]  handle_bullet_collision
2155 - 2169:  [function]  handle_enemy_collision
2194 - 2198:  [function]  get_index
2201 - 2211:  [function]  get_indices
2213 - 2215:  [function]  choice
2217 - 2222:  [function]  get_id
2239 - 2247:  [function]  handle_keyboard
2250 - 2275:  [function]  add_event_listeners
2286 - 2378:  [function]  init_map
2394 - 2424:  [function]  load_level


*/


/* <Animation template> */

var update_fps = function() {
    fps.innerHTML = Math.round(1000/(Date.now()-now));
    now = Date.now();
};

var init_fps = function() {
    fps = document.createElement("a");
    fps.style.color = "lime";
    document.body.appendChild(fps);
    now = Date.now();
};

var init_canvas = function() {
    c   = document.getElementById("cvs");
    ctx = c.getContext("2d");
    c.width = window.innerWidth;
    c.height = window.innerHeight;
    W = window.innerWidth;
    H = window.innerHeight;
};

var main = function() {
    update_fps();
    update();
    clear();
    draw();
    requestAnimationFrame(main);
};


var clear = function() {
    c.width = c.width;
};

window.onload = function() {
    init_fps();
    init_canvas();
    setup();
    requestAnimationFrame(main);
};

/* </Animation template> */






/* <Game loop> */

var fps, now, c, ctx, W, H;

var map, mage;
var coins = [], coin_ref;
var enemies = [];
var mana = 8, health = 8;
var joystick_divs;
var use_joystick = true;
var paused = false;
var minimap, joystick;

var setup = () => {
    map = new Map();
    joystick = new Joystick();
    mage = new Mage();
    
    init_map(map);
    
    mage.set_cycle(data.mage.idle);
    add_event_listeners();
    coin_ref = create_coin_counter();
    
    mana_container.show();
    health_container.show();
    questionmark.show();
    
    update_stats();
    
    load_level(level);
    minimap = new Minimap(map, minimap_colors);
};

var update = () => {  
    // mage.update();
    map.update();
    handle_mage_at_screen_edges();
    handle_mage_collisions();
    handle_mage_coins_collisions();
    handle_bullet_collision();
    handle_enemy_collision();
};

var draw = () => {
    map.update_animation();
    map.draw();
    minimap.draw();
    // for(var i in coins) coins[i].draw();
    // for(var i in enemies) enemies[i].draw();
    // for(var i in mage_bullets) mage_bullets[i].draw();
};

/* </Game loop> */


































var link = "https://i.ibb.co/VxTkPJJ/mage-sprite-8.png";


/* <Toast messages> */

var toast = new Element({
    background: "grey", color: "#fff",
    left: "50%", bottom: "10vh", position: "absolute",
    transform: "translate(-50%, 0)",
    padding: "5px 10px 5px 10px", borderRadius: "5px",
    zIndex: "100",
});

toast.apply_design({
    top: "10vh", bottom: ""
});


/* </Toast messages> */


/* <Coin display> */

var create_coin_counter = function() {
    var div = new Element({
        background: "url("+link+")",
        backgroundPosition: "0 -256px",
        backgroundSize: "512px 512px",
        width: "32px", height: "32px", textAlign: "center",
        lineHeight: "39px", color: "#000", fontWeight: "bold",
        position: "fixed", top: "0", right: "0",
    });
    div.text = coin_counter;
    div.show();
    
    div.add_event_listener( "click" , function() {
        shop_container.fade_in();
        shop_container.appendChild(shop_exit);
        shop_exit.show();
        pause();
    });
    
    return div;
};

/* </Coin display> */


/* <Info display> */

var questionmark = new Element({
    background: "url("+link+")",
    backgroundPosition: "-288px -256px",
    backgroundSize: "512px 512px",
    width: "32px", height: "32px", textAlign: "center",
    lineHeight: "39px", color: "#000", fontWeight: "bold",
    position: "fixed", top: "40px", right: 0,
});

questionmark.add_event_listener( "click" , function() {
    toast.makeToast("Try to defeat all enemies!");
});

/* </Info display> */


/* <Stats> */

var mana_container = new Element({
    width: "96px", height: "32px", position: "fixed",
    right: "40px", top: "0"
});
var mana_left = new Element({
    width: "32px", height: "32px",
    backgroundImage: "url("+link+")",
    backgroundSize: "512px 512px",
});
var mana_middle = new Element({
    width: "32px", height: "32px",
    left: "32px", position: "absolute", top: "0",
    backgroundImage: "url("+link+")",
    backgroundSize: "512px 512px",
});
var mana_right = new Element({
    width: "32px", height: "32px",
    left: "64px", position: "absolute", top: "0",
    backgroundImage: "url("+link+")",
    backgroundSize: "512px 512px",
});

mana_container.appendChild(mana_left);
mana_container.appendChild(mana_middle);
mana_container.appendChild(mana_right);


var health_container = new Element({
    width: "96px", height: "32px", position: "fixed",
    right: "140px", top: "0"
});
var health_left = new Element({
    width: "32px", height: "32px",
    backgroundImage: "url("+link+")",
    backgroundSize: "512px 512px",
});
var health_middle = new Element({
    width: "32px", height: "32px",
    left: "32px", position: "absolute", top: "0",
    backgroundImage: "url("+link+")",
    backgroundSize: "512px 512px",
});
var health_right = new Element({
    width: "32px", height: "32px",
    left: "64px", position: "absolute", top: "0",
    backgroundImage: "url("+link+")",
    backgroundSize: "512px 512px",
});

health_container.appendChild(health_left);
health_container.appendChild(health_middle);
health_container.appendChild(health_right);




var set_mana = function(value /* 0-8 */) {
    if(value === 0) {
        mana_left.div.style.backgroundPosition = "-96px -320px";
        mana_right.div.style.backgroundPosition = "-352px -320px";
        mana_middle.div.style.backgroundPosition = "-256px -320px";
    }
    if(value === 1) {
        mana_left.div.style.backgroundPosition = "-64px -320px";
        mana_right.div.style.backgroundPosition = "-352px -320px";
        mana_middle.div.style.backgroundPosition = "-256px -320px";
    }
    if(value === 2) {
        mana_left.div.style.backgroundPosition = "-32px -320px";
        mana_right.div.style.backgroundPosition = "-352px -320px";
        mana_middle.div.style.backgroundPosition = "-256px -320px";
    }
    if(value === 3) {
        mana_left.div.style.backgroundPosition = "-32px -320px";
        mana_right.div.style.backgroundPosition = "-352px -320px";
        mana_middle.div.style.backgroundPosition = "-224px -320px";
    }
    if(value === 4) {
        mana_left.div.style.backgroundPosition = "-32px -320px";
        mana_right.div.style.backgroundPosition = "-352px -320px";
        mana_middle.div.style.backgroundPosition = "-192px -320px";
    }
    if(value === 5) {
        mana_left.div.style.backgroundPosition = "-32px -320px";
        mana_right.div.style.backgroundPosition = "-352px -320px";
        mana_middle.div.style.backgroundPosition = "-160px -320px";
    }
    if(value === 6) {
        mana_left.div.style.backgroundPosition = "-32px -320px";
        mana_right.div.style.backgroundPosition = "-352px -320px";
        mana_middle.div.style.backgroundPosition = "-128px -320px";
    }
    if(value === 7) {
        mana_left.div.style.backgroundPosition = "-32px -320px";
        mana_right.div.style.backgroundPosition = "-320px -320px";
        mana_middle.div.style.backgroundPosition = "-128px -320px";
    }
    if(value === 8) {
        mana_left.div.style.backgroundPosition = "-32px -320px";
        mana_right.div.style.backgroundPosition = "-288px -320px";
        mana_middle.div.style.backgroundPosition = "-128px -320px";
    }
};


var set_health = function(value /* 0-8 */) {
    if(value === 0) {
        health_left.div.style.backgroundPosition = "-96px -352px";
        health_right.div.style.backgroundPosition = "-352px -352px";
        health_middle.div.style.backgroundPosition = "-256px -352px";
    }
    if(value === 1) {
        health_left.div.style.backgroundPosition = "-64px -352px";
        health_right.div.style.backgroundPosition = "-352px -352px";
        health_middle.div.style.backgroundPosition = "-256px -352px";
    }
    if(value === 2) {
        health_left.div.style.backgroundPosition = "-32px -352px";
        health_right.div.style.backgroundPosition = "-352px -352px";
        health_middle.div.style.backgroundPosition = "-256px -352px";
    }
    if(value === 3) {
        health_left.div.style.backgroundPosition = "-32px -352px";
        health_right.div.style.backgroundPosition = "-352px -352px";
        health_middle.div.style.backgroundPosition = "-224px -352px";
    }
    if(value === 4) {
        health_left.div.style.backgroundPosition = "-32px -352px";
        health_right.div.style.backgroundPosition = "-352px -352px";
        health_middle.div.style.backgroundPosition = "-192px -352px";
    }
    if(value === 5) {
        health_left.div.style.backgroundPosition = "-32px -352px";
        health_right.div.style.backgroundPosition = "-352px -352px";
        health_middle.div.style.backgroundPosition = "-160px -352px";
    }
    if(value === 6) {
        health_left.div.style.backgroundPosition = "-32px -352px";
        health_right.div.style.backgroundPosition = "-352px -352px";
        health_middle.div.style.backgroundPosition = "-128px -352px";
    }
    if(value === 7) {
        health_left.div.style.backgroundPosition = "-32px -352px";
        health_right.div.style.backgroundPosition = "-320px -352px";
        health_middle.div.style.backgroundPosition = "-128px -352px";
    }
    if(value === 8) {
        health_left.div.style.backgroundPosition = "-32px -352px";
        health_right.div.style.backgroundPosition = "-288px -352px";
        health_middle.div.style.backgroundPosition = "-128px -352px";
    }
};

var update_stats = function() {
    set_mana(mana); set_health(health);
    if(health < 0) {
        level = 1, health = 8, mana = 8, coin_counter = 0;
        coin_ref.innerHTML = 0;
        update_stats();
        toast.makeToast("Game Over", 1000);
        setTimeout(function() {
            load_level(level);
        },50);
    }
};

/* </Stats> */





/* <Shop> */

var prices = {
    hp: 10, mp: 1
};



function ScrollSelector(width, height, values, callback) {
    var container = new Element({
        scrollSnapType: "y mandatory",
        overflowX: "hidden", overflowY: "scroll",
        width: width+"px", height: height+"px",
        borderRadius: "10px"
    });
    
    var tabs = [];
    for(var i = 0; i < values.length; i++) {
        var value = values[i];
        var tab = new Element({
            width: width+"px", height: height/2+"px",
            background: "white", color: "black",
            lineHeight: height/2+7+"px", textAlign: "center",
            overflow: "hidden", scrollSnapAlign: "center"
        });
        tab.text = value;
        tab.div.setAttribute("value", value);
        container.appendChild(tab);
        tabs.push(tab);
        
        if(i === 0) tab.div.style.borderTop = height/4+"px solid white";
        if(i === values.length-1) tab.div.style.borderBottom = height/4+"px solid white";
    }
    
    container.add_event_listener("scroll", function() {
        var s = container.div.scrollTop;
        var i = s/(height/2);
        if(i % 1 === 0) {
            container.value = values[i];
            for(var j in tabs) tabs[j].div.style.fontWeight = "lighter";
            tabs[i].div.style.fontWeight = "bolder";
            callback(container.value);
        }
    });
    
    
    container.value = values[0];
    for(var j in tabs) tabs[j].div.style.fontWeight = "lighter";
    tabs[0].div.style.fontWeight = "bolder";
            
    container.tabs = tabs;
    
    return container;
}





var shop_exit = new Element({
    width: "30px", height: "30px",
    position: "absolute", right: "10px",
    top: "10px", background: "red",
    color: "#fff", borderRadius: "5px"
});
shop_exit.text = "<svg width='30px' height='30px'><path"+
" d='M7 7 l16 16 M23 7 L7 23' stroke='white' stroke-width"+
"='5'></path></svg>";

shop_exit.add_event_listener( "click" , function() {
    shop_exit.remove();
    shop_container.fade_out();
    resume();
});


var shop_container = new Element({
    width: "180px",
    height: "150px",
    background: "rgba(255,255,255,0.5)",
    borderRadius: "20px", position: "fixed",
    left: "50%", top: "50%",
    transform: "translate(-50%, -50%)"
});

var shop_mana_container = new Element({
    height: "50px",
    width: "110px",
    position: "fixed",
    left: "20px", top: "20px",
});

var shop_health_container = new Element({
    height: "50px",
    width: "110px",
    position: "fixed",
    left: "20px", top: "80px",
});

var mana_selector = new ScrollSelector(50, 50, [1,2,3,4,5], function(v) {
    mana_selector.remove();
    shop_mana_container.appendChild(shop_mana_potion);
    shop_mana_potion.text = v;
    shop_mana_coin.text = v*prices.mp;
});

var shop_mana_potion = new Element({
    width: "50px", height: "50px",
    left: "0", position: "absolute", top: "0",
    backgroundImage: "url("+link+")",
    backgroundSize: "800px 800px",
    backgroundPosition: "0 -500px",
    lineHeight: "72px", color: "#000",
    textAlign: "center", fontWeight: "bolder"
}); shop_mana_potion.text = 1;
shop_mana_potion.add_event_listener( "click" , function() {
    shop_mana_potion.remove();
    shop_mana_container.appendChild(mana_selector);
});

var shop_mana_coin = new Element({
    width: "50px", height: "50px",
    left: "60px", position: "absolute", top: "0",
    backgroundImage: "url("+link+")",
    backgroundSize: "800px 800px",
    backgroundPosition: "0 -400px",
    lineHeight: "57px", color: "#000",
    textAlign: "center", fontWeight: "bolder"
}); shop_mana_coin.text = 1*prices.mp;
shop_mana_coin.add_event_listener( "click" , function() {
    if(coin_counter >= parseInt(shop_mana_coin.text) &&
    mana <= 8-parseInt(shop_mana_potion.text)) {
        coin_counter -= parseInt(shop_mana_coin.text);
        mana += parseInt(shop_mana_potion.text);
        update_stats();
        coin_ref.text = coin_counter;
    }
});


shop_mana_container.appendChild(shop_mana_potion);
shop_mana_container.appendChild(shop_mana_coin);




var health_selector = new ScrollSelector(50, 50, [1,2,3], function(v) {
    health_selector.remove();
    shop_health_container.appendChild(shop_health_potion);
    shop_health_potion.text = v;
    shop_health_coin.text = v*prices.hp;
});

var shop_health_potion = new Element({
    width: "50px", height: "50px",
    left: "0", position: "absolute", top: "0",
    backgroundImage: "url("+link+")",
    backgroundSize: "800px 800px",
    backgroundPosition: "0 -550px",
    lineHeight: "72px", color: "#000",
    textAlign: "center", fontWeight: "bolder"
}); shop_health_potion.text = 1;
shop_health_potion.add_event_listener( "click" , function() {
    shop_health_potion.remove();
    shop_health_container.appendChild(health_selector);
});

var shop_health_coin = new Element({
    width: "50px", height: "50px",
    left: "60px", position: "absolute", top: "0",
    backgroundImage: "url("+link+")",
    backgroundSize: "800px 800px",
    backgroundPosition: "0 -400px",
    lineHeight: "57px", color: "#000",
    textAlign: "center", fontWeight: "bolder"
}); shop_health_coin.text = 1*prices.hp;
shop_health_coin.add_event_listener( "click" , function() {
    if(coin_counter >= parseInt(shop_health_coin.text) &&
    health <= 8-parseInt(shop_health_potion.text)) {
        coin_counter -= parseInt(shop_health_coin.text);
        health += parseInt(shop_health_potion.text);
        update_stats();
        coin_ref.text = coin_counter;
    }
});


shop_health_container.appendChild(shop_health_potion);
shop_health_container.appendChild(shop_health_coin);


shop_container.appendChild(shop_mana_container);
shop_container.appendChild(shop_health_container);
shop_container.appendChild(shop_exit);



/* </Shop> */

























/* <Sprite class> */


function Sprite() {
    
    this.img = new Image();
    this.img.crossOrigin = "*";
    this.img.src = link;
    this.active_data;
    this.cycle_array;
    this.interval;
    
    this.blit = function(x,y,m) {
        var d = this.active_data;
        if(d && d[6] && !m || d && !d[6] && m) {
            ctx.setTransform(-1,0,0,1,x,y);
            ctx.drawImage(this.img, d[0], d[1], d[2], d[3],
                                   -d[5],   0,  d[4], d[5]);
            ctx.setTransform(1,0,0,1,0,0);
        } else if(d) {
            ctx.drawImage(this.img, d[0], d[1], d[2], d[3],
                                    x,    y,    d[4], d[5]);
        }
    };
    
    this.set_cycle = function(array, time, mirror) {
        time = time || 150;
        var cycle = [];
        for(var i in array) {
            var d = data.tiles[Math.abs(array[i])];
            if(array[i] < 0 || mirror) d = d.concat(true);
            cycle.push(d);
        }
        
        
        if(!equals(cycle,this.cycle_array)) {
            this.cycle_array = [-1,cycle];
            var update = () =>  {
                this.update_cycle(this.cycle_array);
            };
            update();
            // if(this.interval) this.interval.pause();
            this.animation_interval = new Interval(update,time);
        }
    };
    
    this.update_cycle = function(array) {
        var ca = array;
        this.cycle_array[0] = ca[0]>ca[1].length-2?0:ca[0]+1;
        this.active_data = ca[1][this.cycle_array[0]];
    };
    
    this.get_cycle = function(array) {
        var cycle = [];
        for(var i in array) {
            var d = data.tiles[Math.abs(array[i])];
            if(array[i] < 0) d = d.concat(true);
            cycle.push(d);
        }
        return cycle;
    };
    
    this.update_animation = function() {
        this.animation_interval.update();
    };
    
    this.update = function() {
        if(this.interval) this.interval.update();
    };
}

/* </Sprite class> */












/* <Mage class> */

var mage_bullets = [];
function Mage(scale) {
    Sprite.call(this);
    this.vel = {x:0, y:0};
    this.pos = {x:48, y:48};
    this.gravity = {x:0, y:0.5};
    this.friction = {x:1, y:1};
    this.size = 24;
    this.on_ground = false;
    this.at_wall = false;
    this.mirror = false;
    this.shot = false;
    this.invincible = false;
    this.in_double = false;
    this.in_air = true;
    var self = this;
    
    this.draw = function(x,y) {
        this.blit(x-this.size/2,
                  y-this.size/2, this.mirror);
    };
    
    var min = function(u, v) {
        return Math.abs(u) < v? u: u<0?-v:v;
    }; 
    
    this.update = function() {
        
        var keyboard = handle_keyboard(this);
        
        var dx = keyboard.dx || (joystick.right?1:joystick.left?-1:0);
        var dy = -keyboard.dy || 0;
        
        if(use_joystick && !paused) {
            this.vel.x = min(this.vel.x+dx/3, 3);
            if(dx === 0) this.vel.x *= 0.85;
            if(Math.abs(this.vel.x) < 0.1) this.vel.x = 0;
            
            if(dx > 0) this.mirror = false;
            if(dx < 0) this.mirror = true;
            
            
            if((joystick.jump || dy > 0) && (this.on_ground)) {
                this.jump(this.in_air?1.5:2);
            }
            
            if(this.vel.y > 0 && !this.in_double && (joystick.jump || dy > 0)) {
                this.in_double = true;
                this.jump(2);
            }
        
            this.vel.x += this.gravity.x*this.friction.x;
            
            this.pos.x += this.vel.x;
            this.pos.y += this.vel.y;
            
            if(!this.on_ground) {
                this.vel.y += this.gravity.y*this.friction.y;
            } else {
                this.in_double = false;
                this.in_air = false;
            }
            
            if(this.at_wall) {
                this.in_double = false;
                this.in_air = false;
                if((dx > 0 || joystick.jump || dy > 0) && this.at_wall === "l") this.jump(2,3);
                if((dx < 0 || joystick.jump || dy > 0) && this.at_wall === "r") this.jump(2,-3);
            }
            
            if(!this.on_ground && !this.at_wall) {
                this.in_air = true;
            }
                
            if(this.vel.y < 0) this.set_cycle(data.mage.jump);
            if(this.vel.y > 0 && !mage.on_wall) this.set_cycle(data.mage.fall);
            if(this.vel.y > 9 && !mage.on_wall) this.set_cycle(data.mage.fast_fall);
            if(this.on_ground && dx === 0) this.set_cycle(data.mage.idle);
            if(this.at_wall && !this.on_ground) this.set_cycle(data.mage.wall);
            if(this.on_ground && dx !== 0) this.set_cycle(data.mage.walk);
            
            if(keyboard.shooting || joystick.shoot || this.shot) {
                this.shoot(250); // cooldown ms
                this.set_cycle(data.mage.shoot);
            }
            
            
            if(this.vel.x !== 0 || this.vel.y !== 0) minimap.reposition();
        }
    };
    
    this.jump = function(sy, sx) {
        this.in_air = true;
        
        var x = Math.abs((sx||0));
        var y = Math.sqrt(map.tile_size*
                (map.tile_size*sy)/32);
        x = Math.sqrt(map.tile_size*
                (map.tile_size*x+this.size/2)/32);
        this.vel.y = -y;
        this.vel.x += sx>0?x:sx<0?-x:0;
    };
    
    this.shoot = function(cooldown) {
        if(!this.shot && mana > 0 && !paused) {
            mana--; update_stats();
            this.shot = true;   
            var a = this;
            var reload = function() {
                space_key_down = false;
                a.shot = false;
            };
            setTimeout(reload, cooldown);
            var bullet = new MageBullet(this.pos, this.mirror);
            mage_bullets.push(bullet);
        }
    };
}

Mage.prototype = Object.create(Sprite.prototype);


/* </Mage class> */






/* <Enemy class> */

function Enemy(x,y) {
    Sprite.call(this);
    this.size = 24;
    this.pos = {x:(x+0.5)*map.tile_size+(map.tile_size-this.size)/2,
                y:(y+0.5)*map.tile_size+(map.tile_size-this.size)/2};
    
    this.mirror = false;
    var color = Math.floor(4*Math.random());
    
    this.create = function() {
        this.id = get_id();
        this.set_cycle(data.enemy[color], 300);
        map.data.foreground[this.id] = this;
        
        var a = this;
        this.interval = new Interval(function() {
            var np = {x: a.pos.x + map.tile_size/(a.mirror?-6:6), y:a.pos.y};
            var col = block_collisions(a.pos, a.size);
            if(col.bbl && !col.bbr || col.bbr && !col.bbl ||
            col.tr || col.tl) {
                a.mirror = !a.mirror;
            }
            a.pos.x += map.tile_size/(a.mirror?-20:20);
        }, 40); 
        
    };
    
    this.draw = function(x,y) {
        // var x = this.pos.x + map.offset.x;
        // var y = this.pos.y + map.offset.y;
        this.blit(x-this.size/2, y-this.size/2, this.mirror);
    };
    
    
    this.create();
}


Enemy.prototype = Object.create(Sprite.prototype);



/* </Enemy class> */











/* <Projectile class> */

function MageBullet(pos, mirror) {
    Sprite.call(this);
    this.pos = {x:pos.x, y:pos.y};
    this.size = 24;
    this.mirror = mirror;
    
    this.create = function() {
        this.id = get_id();
        this.set_cycle(data.bullet.move, 500);
        map.data.foreground[this.id] = this;
        var a = this;
        this.interval = new Interval(function() {
            a.pos.x += map.tile_size/(a.mirror?-3:3);
        }, 16);
    };
    
    this.draw = function(x,y) {
        // var coords = map.get_coords([this.pos.y, this.pos.x]);
        // var x = this.pos.x + map.offset.x;
        // var y = this.pos.y + map.offset.y;
        this.blit(x-this.size/2, y-this.size/2, this.mirror);
    };
    
    
    this.create();
}

MageBullet.prototype = Object.create(Sprite.prototype);


/* </Projectile class> */














/* <Coin class> */

function Coin(x,y) {
    Sprite.call(this);
    this.pos = {x:x, y:y};
    this.coords = map.get_coords([y,x]);
    this.size = 24;
    this.id = get_id();
    this.draw = function() {
        var x = this.coords.x + map.offset.x;
        var y = this.coords.y + map.offset.y;
        this.blit(x-this.size/2, y-this.size/2);
    };
}

Coin.prototype = Object.create(Sprite.prototype);


/* </Coin class> */





/* <Map class> */


/* Background is the background image and shouldn't be
   changed in game. Foreground is for light data images
   and sprites that need to update every frame.
   Updating background needs a Map.create call to render changes 
*/
function Map() {
    this.tile_size = 32; // parseInt(prompt("Blocksize: ", 32));
    this.width = null;
    this.height = null;
    this.img = new Image();
    this.offset = {x:0, y:0}; // drawing offset (translation)
    this.data = {foreground:{}};
    this.create = function() {
        var h = this.tile_size*this.data.background.length;
        var w = this.tile_size*this.data.background[0].length;
        c.width = w; c.height = h;
        c.style.width = w+"px"; c.style.height = h+"px";
        this.detailed_draw();
        this.img.src = c.toDataURL("image/png")
        .replace("image/png","image/octet-stream");
        c.width = W; c.height = H;
        c.style.width = W+"px"; c.style.height = H+"px";
    };
    this.draw = function() {
        /* background image */
        if(this.background_img)
            ctx.drawImage(this.background_img,
            this.offset.x-window.innerWidth/2-50, this.offset.y-window.innerHeight/3);
        
        /* static background */
        ctx.drawImage(this.img, this.offset.x, this.offset.y);
        
        /* non-static foreground */
        for(var i in this.data.foreground) {
            var sprite = this.data.foreground[i];
            sprite.draw(sprite.pos.x+this.offset.x,
                        sprite.pos.y+this.offset.y);
        }
    };
    this.detailed_draw = function() {
        for(var y in this.data.background) {
            for(var x in this.data.background[y]) {
                var tile_id = this.data.background[y][x];
                if(this.enemy_tile == tile_id) tile_id = 0;
                var mirror_tile = tile_id < 0;
                var tile = this.data.tiles[Math.abs(tile_id)][0];
                if(mirror_tile) tile = this.mirror_tile(tile);
            
                
                if(32 % tile.length !== 0)
                    throw "Tile SizeError: tile "+tile_id+
                          ": "+tile.length;
                var height = this.tile_size/tile.length;
                    
                for(var ty in tile) {
                    if(32 % tile[ty].length !== 0)
                    throw "Tile SizeError: tile "+tile_id+
                          ": "+tile[ty].length;
                    var width = this.tile_size/tile[ty].length;
                    for(var tx in tile[ty]) {
                        ctx.fillStyle =
                        this.data.colors[tile[ty][tx]];
                        ctx.fillRect(x*this.tile_size+tx*
                                     width+this.offset.x,
                                     y*this.tile_size+ty*
                                     height+this.offset.y,
                                     width, height);
                    }
                }
            }
        }
    };
    this.mirror_tile = function(tile) {
        var new_tile = JSON.parse(JSON.stringify(tile));
        for(var i in new_tile) new_tile[i].reverse();
        return new_tile;
    };
    this.get_tile = function(x,y) {
        return this.data.background[y][x];
    };
    this.get_coords = function(a) {
        return {x: this.tile_size*a[1]+this.tile_size/2,
                y: this.tile_size*a[0]+this.tile_size/2};
    };
    
    this.update_animation = function() {
        if(!paused) {
           for(var i in this.data.foreground) {
                this.data.foreground[i].update_animation();
            }
        }
    };
    
    this.update = function() {
        if(!paused) {
            for(var i in this.data.foreground) {
                this.data.foreground[i].update();
            }
        }
    };
}

/* </Map class> */










/* <Minimap class> */

var minimap_colors = {
    0:"rgba(0,0,0,0)", 1:"#fff",
    enemy: "#f00", coin: "#ff0",
    bullet: "#f0f", 3: "#0f0",
    2: "#0f0", mage: "#0f0",
    4: "#00f", 5: "#fa0",
    6: "#0ff"
};

function Minimap(map, colors) {
    
    var mx = window.innerWidth-228+"px", my = "40px",
         x = "calc(100vw - 72px)", y = "40px";
    /* map_x, map_y, mini_x, mini_y*/
    var width = 188, height = 188;
    
    this.map = map;
    this.offset = {x:32, y:32};
    var mini = document.createElement("div");
    // mini.style.backgroundColor = "#000";
    mini.style.width = 32+"px";
    mini.style.height = 32+"px";
    mini.style.borderRadius = 5+"px";
    // mini.style.border = "1px solid #fff";
    mini.style.position = "absolute";
    mini.style.zIndex = "2";
    mini.style.backgroundImage = "url("+link+")",
    mini.style.backgroundPosition = "-160px -128px",
    mini.style.backgroundSize = "256px 256px",
    mini.style.left = x; mini.style.top = y;
    
    var canvas = document.createElement("canvas");
    var ctx = canvas.getContext("2d");
    canvas.width = width, canvas.height = height,
    canvas.style.width = width+"px",
    canvas.style.background = "rgba(0,0,0,0.5)";
    canvas.style.height = height+"px";
    canvas.style.borderRadius = 5+"px";
    canvas.style.border = "1px solid #000";
    canvas.style.zIndex = "1";
    canvas.style.position = "absolute";
    canvas.style.left = mx;
    canvas.style.top = my;
    
    mini.addEventListener("click", function(e) {
        if(canvas.parentNode != document.body)
            document.body.appendChild(canvas);
        else document.body.removeChild(canvas);
        
        self.reposition();
    });
    
    this.reposition = function() { 
        var f = tile_size / self.map.tile_size;
        self.offset.x = -mage.pos.x*f+width/2;
        self.offset.y = -mage.pos.y*f+height/2;
        start_offset.x = self.offset.x;
        start_offset.y = self.offset.y; 
    };
    
    
    
    
    var drag = false,
        map_translate = false,
        map_zoom = false,
        map_pivot,
        start_offset = {x:32, y:32},
        start_size = 4,
        tile_size = 4;
        
    var start = function(e) {
        if(e.target === mini) {
            drag = true;
        } else if(e.target === canvas) {
            if(e.targetTouches.length === 1) {
                map_translate = true;
                map_pivot = {
                    x: e.targetTouches[0].clientX,
                    y: e.targetTouches[0].clientY,
                };
            } else if(e.targetTouches.length === 2) {
                if(map_translate) {
                    map_translate = false,
                    start_offset.x = self.offset.x,
                    start_offset.y = self.offset.y;
                    draw();
                }
                map_zoom = true;
                var x1 = e.targetTouches[0].clientX,
                    y1 = e.targetTouches[0].clientY,
                    x2 = e.targetTouches[1].clientX,
                    y2 = e.targetTouches[1].clientY;
                map_pivot = {
                    x: x1+(x2-x1)/2 - parseInt(canvas.style.left),
                    y: y1+(y2-y1)/2 - parseInt(canvas.style.top),
                    l: Math.sqrt(Math.pow(y2-y1,2)+Math.pow(x2-x1,2))
                };
                
            }
        }
    };
    
    var move = function(e) {
        var x = e.targetTouches[0].clientX,
            y = e.targetTouches[0].clientY;
        if(drag && e.target === mini) {
            var tx = x-16, ty = y-16;
            mini.style.left = tx+"px"; mini.style.top = ty+"px";
            canvas.style.left = tx-width+32+"px"; canvas.style.top = ty+"px";
        } else if(map_translate) {
            x = e.targetTouches[0].clientX,
            y = e.targetTouches[0].clientY;
            self.offset.x = start_offset.x+x-map_pivot.x;
            self.offset.y = start_offset.y+y-map_pivot.y;
            draw();
        } else if(map_zoom) {
            x = e.targetTouches[0].clientX,
            y = e.targetTouches[0].clientY;
            var px = map_pivot.x, py = map_pivot.y;
            var x2 = e.targetTouches[1].clientX,
                y2 = e.targetTouches[1].clientY;
            var l = Math.sqrt(Math.pow(y2-y,2)+Math.pow(x2-x,2));
            var f = l / map_pivot.l;
            tile_size = f*start_size;
            self.offset.x = start_offset.x-((f-1)*(map_pivot.x-start_offset.x));
            self.offset.y = start_offset.y-((f-1)*(map_pivot.y-start_offset.y));
            
            draw();
        }
    };
    
    var stop = function(e) {
        drag = false;
        if(map_translate && e.target === canvas) {
            map_translate = false,
            start_offset.x = self.offset.x,
            start_offset.y = self.offset.y;
        } if(map_zoom && e.target === canvas) {
            map_translate = false;
            map_zoom = false;
            start_size = tile_size;
            start_offset.x = self.offset.x,
            start_offset.y = self.offset.y;
        }
    };
    
    
    
    /* {0:"#000", 1:"#fff", emeny: "#f00", coin: "#ff0", bullet: "#f0f",
        3: "#0f0", 2: "#0f0"}
    */
    
    var self = this;
    this.create = function() {
        var h = self.map.tile_size*self.map.data.background.length;
        var w = self.map.tile_size*self.map.data.background[0].length;
        img_width = w, img_height = h;
        canvas.width = w; canvas.height = h;
        canvas.style.width = w+"px";
        canvas.style.height = h+"px";
        detailed_draw();
        img.src = canvas.toDataURL("image/png")
        .replace("image/png","image/octet-stream");
        canvas.width = width; canvas.height = height;
        canvas.style.width = width+"px";
        canvas.style.height = height+"px";
    };
    
    
    var img = new Image(), img_width, img_height;
    var detailed_draw = function() {
        for(var y in self.map.data.background) {
            for(var x in self.map.data.background[y]) {
                var id = self.map.data.background[y][x];
                ctx.fillStyle = colors[id]?colors[id]:"rgba(0,0,0,0)";
                ctx.fillRect(x*self.map.tile_size, y*self.map.tile_size, self.map.tile_size, self.map.tile_size);
            }
        }
    };
    
    this.create();
    
    
    var draw = function() {
        canvas.width = canvas.width;
        ctx.translate(self.offset.x, self.offset.y);
        
        var f = tile_size / self.map.tile_size;
        
        /* background */ /*
        for(var y in map.data.background) {
            for(var x in map.data.background[y]) {
                var id = map.data.background[y][x];
                ctx.fillStyle = colors[id]?colors[id]:"rgba(0,0,0,0)";
                ctx.fillRect(x*tile_size, y*tile_size, tile_size, tile_size);
            }
        } */
        
        ctx.drawImage(img, 0, 0, f*img_width, f*img_height);
        
        
        for(var i in self.map.data.foreground) {
            if(self.map.data.foreground[i] instanceof Mage) {
                var mage = self.map.data.foreground[i];
                ctx.fillStyle = colors.mage?colors.mage:"rgba(0,0,0,0)";
                ctx.beginPath();
                ctx.arc(mage.pos.x*f, mage.pos.y*f, tile_size/2, 0, 2*Math.PI);
                ctx.closePath();
                ctx.fill();
            }
        }
        
        
        for(var i in self.map.data.foreground) {
            if(self.map.data.foreground[i] instanceof MageBullet) {
                var bullet = self.map.data.foreground[i];
                ctx.fillStyle = colors.bullet?colors.bullet:"rgba(0,0,0,0)";
                ctx.beginPath();
                ctx.arc(bullet.pos.x*f, bullet.pos.y*f, tile_size/2, 0, 2*Math.PI);
                ctx.closePath();
                ctx.fill();
            }
        }
        
        
        for(var i in self.map.data.foreground) {
            if(self.map.data.foreground[i] instanceof Enemy) {
                var enemy = self.map.data.foreground[i];
                ctx.fillStyle = colors.enemy?colors.enemy:"rgba(0,0,0,0)";
                ctx.beginPath();
                ctx.arc(enemy.pos.x*f, enemy.pos.y*f, tile_size/2, 0, 2*Math.PI);
                ctx.closePath();
                ctx.fill();
            }
        }
        
        
        for(var i in self.map.data.foreground) {
            if(self.map.data.foreground[i] instanceof Coin) {
                var coin =self.map.data.foreground[i];
                ctx.fillStyle = colors.coin?colors.coin:"rgba(0,0,0,0)";
                ctx.beginPath();
                ctx.arc(coin.coords.x*f, coin.coords.y*f, tile_size/2, 0, 2*Math.PI);
                ctx.closePath();
                ctx.fill();
            }
        }
    };
    
    
    
    document.addEventListener("touchstart", start);
    document.addEventListener("touchmove", move);
    document.addEventListener("touchend", stop);
    document.addEventListener("touchcancel", stop);
    document.body.appendChild(mini);
    
    this.draw = function() {
        if(canvas.parentNode === document.body)
            draw();
    };
}

/* </Minimap class> */




















/* <Controls class> */

function Joystick(callback) {
    
    var left_div, right_div, jump_div, shoot_div,
        change_div, pos, divs;
        
    this.left = false, this.right = false, this.jump = false,
    this.shoot = false, this.drag = false;
    
    
    var apply_design = function(e, s) {
        for(var i in s) e.style[i] = s[i];
    };
        
    
    var setup = function() {
        left_div = document.createElement("div");
        right_div = document.createElement("div");
        jump_div = document.createElement("div");
        shoot_div = document.createElement("div");
        change_div = document.createElement("div");
        
        left_div.setAttribute("name", "left");
        right_div.setAttribute("name", "right");
        jump_div.setAttribute("name", "jump");
        shoot_div.setAttribute("name", "shoot");
        change_div.setAttribute("name", "change");
        
        divs = [left_div, right_div, jump_div, shoot_div];
        
        var W = window.innerWidth, H = window.innerHeight;
        pos = {
            left: {
                x:"60px", y:"calc(100vh - 50px)", w:80, h:50,
                svg: "<svg width='80'height='50'"+
                     "style='background:rgba(0,0,0,0);'><path fill='rgba(0,0,0,0.6)' d='"+
                     "M22 25 l15 -15 l0 10 l20 0 l0 10 l-20 0 l0 10 z'></path></svg>",
            },
            right: {
                x:"150px", y:"calc(100vh - 50px)", w:80, h:50,
                svg: "<svg width='80'height='50'"+
                     "style='background:rgba(0,0,0,0);'><path fill='rgba(0,0,0,0.6)' d='"+
                     "M58 25 l-15 -15 l0 10 l-20 0 l0 10 l20 0 l0 10 z'></path></svg>"
            },
            jump: {
                x:"calc(100vw - 50px)", y:"calc(100vh - 50px)", w:50, h:50,
                svg: "<svg width='50'height='50'"+
                     "style='background:rgba(0,0,0,0);'><path fill='rgba(0,0,0,0.6)' d='"+
                     "M25 10 l15 15 l-10 0 l0 15 l-10 0 l0 -15 l-10 0 z'></path></svg>"
            },
            shoot: {
                x:"calc(100vw - 50px)", y:"calc(100vh - 110px)", w:50, h:50,
                svg: "<svg width='50'height='50'"+
                     "style='background:rgba(0,0,0,0);'><circle fill='rgba(128,0,255,0.6)'"+
                     " cx='25' cy='25', r='15'></circle></svg>"
            }
        };
        
        for(var i in divs) {
            var p = pos[divs[i].getAttribute("name")];
            apply_design(divs[i], {
                background: "rgba(255,255,255,0.1)",
                position: "absolute", left: p.x,
                top: p.y, width: p.w+"px", height: p.h+"px",
                borderRadius: "10px", border: "1px solid black",
                // boxSizing: "border-box"
            });
            
            divs[i].innerHTML = p.svg;
            document.body.appendChild(divs[i]);
            
            make_draggable(divs[i]);
        }
        
        var change_func = function(e) {
            if(is_targeted(e.target, change_div)) {
                self.drag = !self.drag;
                var color = change_div.style.background;
                if(color === "rgb(0, 0, 0)") {
                    pause();
                    toast.makeToast("Drag control buttons to reposition them");
                    change_div.style.background = "#fff";
                    for(var i in divs)
                        divs[i].style.background = "red";
                } else {
                    resume();
                    change_div.style.background = "#000";
                    for(var i in divs)
                        divs[i].style.background = "rgba(255,255,255,0.1)";
                }
            }
        };
        
        var start = function(e) {
            var x, y;
            
            var trues = [];
            
            for(var i in e.touches) {
                if(!isNaN(i)) {
                    x = e.touches[i].clientX,
                    y = e.touches[i].clientY;
                    var elems = document.elementsFromPoint(x,y);
                    for(var i in elems) {
                        var elem = elems[i], name = elem.getAttribute("name");
                        if(name !== null && !self.drag && name !== "change") {
                            self[name] = true;
                            trues.push(name);
                        }
                    }
                }
            }
            
            
            
            for(var i in divs) {
                var elem = divs[i], name = elem.getAttribute("name");
                if(!trues.includes(name)) self[name] = false;
            } 
            
            
        };
        
        window.addEventListener("click", change_func);
        window.addEventListener("touchstart", start);
        window.addEventListener("touchmove", start);
        window.addEventListener("touchend", start);
        window.addEventListener("touchcancel", start);
        
        document.body.appendChild(change_div);
        
        change_div.style.width = "32px", change_div.style.height = "32px",
        change_div.style.position = "absolute",
        change_div.style.right = "5px", change_div.style.top = "80px",
        change_div.style.background = "#000";
        change_div.style.borderRadius = "10px";
        change_div.style.border = "1px solid white";
        
        
    };
    
    
        
    var self = this;
    var make_draggable = function(elem) {
        elem.style.transform = "translate(-50%, -50%)";
        elem.style.position = "absolute";
        window.addEventListener("touchmove", function(e) {
            if(self.drag && is_targeted(e.target, elem)) {
                elem.style.left = e.targetTouches[0].clientX+"px";
                elem.style.top = e.targetTouches[0].clientY+"px";
            }
        });
    };
    
    var is_targeted = function(elem, target) {
        return elem?(elem === target || is_targeted(elem.parentNode, target)):false;
    };
    
    // window.addEventListener("DOMContentLoaded", setup);
    setup();
}

/* </Controls class> */




















/* <DOM Elenment class> */

function Element(design, text) {
    this.appendChild = function(element) {
        this.div.appendChild(element.div);
        this.children.push(element);
    };
    
    this.show = function() {
        if(!this.on_screen()) {
            document.body.appendChild(this.div);
        } this.div.style.opacity = "1";
    };
    
    this.hide = function() {
        this.div.style.opacity = "0";
        this.div.style.transition = "";
    };
    
    this.remove = function() {
        if(this.div.parentNode) {
            this.div.parentNode.removeChild(this.div);
        }
    };
     
    this.on_screen = function(node) {
        node = node || this.div;
        if(node.parentNode) {
            var a = node.parentNode == document.body;
            return a || this.on_screen(node.parentNode);
        }
        return false;
    };
     
    this.apply_design = function(design) {
        for(var i in design) {
            this.div.style[i] = design[i];
        }
    };
     
    this.fade_in = function(a) {
        a = a || 1;
        var div = this.div;
        // div.style.left = ""; div.style.right = "";
        this.apply_design({opacity:0, transition:a+"s"});
        this.show();
        setTimeout(function(){div.style.opacity = "1"});
    };
     
    this.fade_out = function(a) {
        a = a || 1;
        var div = this.div, elem = this;
        this.apply_design({opacity:1, transition:a+"s"});
        setTimeout(function(){div.style.opacity = "0"});
        setTimeout(function(){elem.hide();},a*1000);
    };
     
    this.slide_from_right = function(a) {
        a = a || 0.2;
        var div = this.div;
        div.style.left = ""; div.style.right = "";
        this.apply_design({
            left:"100vw",position:"absolute",transition: a+"s"});
        this.show();
        setTimeout(function(){div.style.left = "0"});
    };
     
    this.slide_to_right = function(a) {
        a = a || 0.2;
        var div = this.div, elem = this;
        div.style.left = ""; div.style.right = "";
        this.apply_design({
            left:"0",position:"absolute",transition: a+"s"});
        this.show();
        setTimeout(function(){div.style.left = "100vw"});
        setTimeout(function(){elem.hide();},a*1000);
    };
     
    this.slide_from_left = function(a) {
        a = a || 0.2;
        var div = this.div;
        div.style.left = ""; div.style.right = "";
        this.apply_design({
            right:"100vw",position:"absolute",transition:a+"s"});
        this.show();
        setTimeout(function(){div.style.right = "0"});
    };
     
    this.slide_to_left = function(a) {
        a = a || 0.2;
        var div = this.div; var elem = this;
        div.style.left = ""; div.style.right = "";
        this.apply_design({
            right:"0",position:"absolute",transition:a+"s"});
        this.show();
        setTimeout(function(){div.style.right = "100vw"});
        setTimeout(function(){elem.hide();},a*1000);
    };
     
    this.add_event_listener = function(event, listener) {
        this.div.addEventListener(event, function(e) {
            listener(e);
        });
    };
     
    this.copy_text = function(text) {
        var textArea = document.createElement("textarea");
        textArea.value = text || this.text;
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
    };
    
    
    this.div = document.createElement("div");
    this.apply_design(design);
    this.children = [];
    if(text) this.text = text;
    
    Object.defineProperty(this, "text", {
        get: function() {
            return this.div.innerHTML;
        }, set: function(value) {
            this.div.innerHTML = value;
        }
    });
}

 

toast.makeToast = (text, duration) => {
    duration = duration || text.length*50;
    toast.text = text;
    toast.show();
    clearTimeout(toast.timeout);
    toast.timeout = setTimeout(()=>{
        toast.fade_out();
    }, duration);
};

/* </DOM Elenment class> */
























/* <Interval class> */

function Interval(callback, speed) {
    this.speed = speed;
    this.start = Date.now();
    this.update = function() {
        var now = Date.now();
        if(now - this.start >= this.speed) {
            this.start = now;
            callback();
        }
    };
}

/* </Interval class> */




/* <Class functions> */

var spawn_enemies = function(v) {
    var indices = [], m = map.data.background;
    if(!(v instanceof Array)) {
        for(var y in m) {
            for(var x in m[y]) {
                var ny = parseInt(y)+1;
                if(m[ny] && (m[y][x] == 0) && (m[ny][x] == 1)) {
                    indices.push([parseInt(x), ny-1]);
                }
            }
        }
        
        for(var i = 0; i < v; i++) {
            var pos = choice(indices);
            enemies.push(new Enemy(pos[0], pos[1]));
        }
    } else {
        // v can be a number for how many enemies to randomly spawn
        // or an array where to spawn enemies (position given in
        // map data background) The background-block will be the
        // air-block 0
        for(var y in m) {
            for(var x in m[y]) {
                if(m[y][x] == map.enemy_tile) {
                    indices.push([parseInt(x), parseInt(y)]);
                }
            }
        }
        
        
        for(var i in indices) {
            enemies.push(new Enemy(indices[i][0], indices[i][1]));
        }
        
    }
};

var spawn_coins = function(k) {
    for(var j = 0; j < k; j++) {
        var x, y, i = 0;
        do {
            i++;
            x = Math.floor(Math.random()*map.data.background[0].length);
            y = Math.floor(Math.random()*map.data.background.length);
        } while(i < 1e3 && map.data.solid_tiles.includes(parseInt(map.get_tile(x,y))));
        var coin = new Coin(x,y);
        coin.set_cycle(data.coin.idle, 150+Math.floor(Math.random()*50));
        map.data.foreground[coin.id] = coin;
        coins.push(coin);
    }
};


var delete_all_coins = function() {
    for(var i in coins) {
        delete coins[i].interval;
        delete map.data.foreground[coins[i].id];
    }
    coins = [];
};

var delete_all_bullets = function() {
    for(var i in mage_bullets) {
        delete mage_bullets[i].interval;
        delete map.data.foreground[mage_bullets[i].id];
    }
    mage_bullets = [];
};

var delete_all_enemies = function() {
    for(var i in enemies) {
        delete enemies[i].interval;
        delete map.data.foreground[enemies[i].id];
    }
    enemies = [];
};
/* </Class functions> */

/**************************************************************/








/*************************[FUNCTIONS]**************************/

var pause = function() {
    paused = true;
};

var resume = function() {
    paused = false;
};



var equals = function(c,a) {
    if(!a || !c) return false;
    for(var i in c) {
        for(var j in c[i]) {
            if(c[i][j] !== a[1][i][j]) return false;
        }
    } return true;
};



/* <Camera focus> */

var handle_mage_at_screen_edges = function() {
    var map_pos = map.data.foreground.mage.pos;
    var screen = {x: map_pos.x+map.offset.x,
                  y: map_pos.y+map.offset.y};
    var border = {x:1e3, y:1e3};
    if(border.x > W/2-50) border.x = W/2-50;
    if(border.y > H/3) border.y = H/3;
    if(screen.x < border.x) map.offset.x += border.x-screen.x;
    if(screen.x > W-border.x) map.offset.x += (W-border.x)-screen.x;
    if(screen.y < border.y) map.offset.y += border.y-screen.y;
    if(screen.y > H-border.y) map.offset.y += (H-border.y)-screen.y;
};

/* </Camera focus> */



/* <Block effects> */

var block_collisions = function(pos /* map coords */, size) {
    var i = get_indices(pos, size);
    var tiles = [[i.t,i.r], [i.t,i.l], [i.b,i.r], [i.b,i.l],
                 [i.bb, i.l], [i.bb, i.r]];
    var coords = [map.get_coords(tiles[0]),
                  map.get_coords(tiles[1]),
                  map.get_coords(tiles[2]),
                  map.get_coords(tiles[3]),
                  map.get_coords(tiles[4]),
                  map.get_coords(tiles[5])];
    var collisions = {};
    
    for(var i in coords) {
        var cs = coords[i];
        var index = get_index(cs);
        var tile_data = map.get_tile(index[0],index[1]);
        var d = mage.size/2+map.tile_size/2;
        var dx = pos.x - cs.x;
        var dy = pos.y - cs.y;
        
        if(map.data.solid_tiles.includes(parseInt(tile_data))){
            var vy = dy>0?d-dy:-d-dy;
            var vx = dx>0?d-dx:-d-dx;
            if(Math.abs(dx) > Math.abs(dy)) {
                pos.x += vx;
            } else {
                pos.y += vy;
            }
            collisions.tr = (i == 0 || collisions.tr);
            collisions.tl = (i == 1 || collisions.tl);
            collisions.br = (i == 2 || collisions.br);
            collisions.bl = (i == 3 || collisions.bl);
            collisions.bbr = (i == 4 || collisions.bbr);
            collisions.bbl = (i == 5 || collisions.bbl);
        }
    }
    
    return collisions;
};


/* </Block effects> */




/* <Mage - Block collision> */

var handle_mage_collisions = function() {
    var i = get_indices(mage.pos, mage.size);
    
    var tiles = [[i.t,i.r], [i.t,i.l], [i.b,i.r], [i.b,i.l],
                 [i.bb, i.l], [i.bb, i.r]];
    var coords = [map.get_coords(tiles[0]),
                  map.get_coords(tiles[1]),
                  map.get_coords(tiles[2]),
                  map.get_coords(tiles[3]),
                  map.get_coords(tiles[4]),
                  map.get_coords(tiles[5])];
    var collisions = {};
    
    var effects = [];
    
    for(var i in coords) {
        var cs = coords[i];
        var index = get_index(cs);
        var tile_data = map.get_tile(index[0],index[1]);
        var d = mage.size/2+map.tile_size/2;
        var dx = mage.pos.x - cs.x;
        var dy = mage.pos.y - cs.y;
        
        if(map.data.solid_tiles.includes(parseInt(tile_data))){
            var vy = dy>0?d-dy:-d-dy;
            var vx = dx>0?d-dx:-d-dx;
            if(Math.abs(dx) > Math.abs(dy)) {
                mage.pos.x += vx;
                collisions.x = dx>0?"l":"r";
            } else {
                mage.pos.y += vy;
                collisions.y = dy>0?"t":"b";
            }
        }
        
        if(!effects.includes(tile_data)) effects.push(tile_data);
    }
    
    
    /* collision data stored in collisions
    if y:b => ground
    if y:t and x:null => head bump
    if x:l/r and y:t/null => wall
    */
    
    var on_ground = collisions.y == "b";
    var head_bump = collisions.y == "t" && collisions.x == null;
    var on_wall = collisions.x && collisions.y != "b";
    on_wall = on_wall?collisions.x:false;
    
    if(on_ground) {
        mage.vel.y = 0;
        mage.on_ground = true;
        mage.at_wall = false;
    } else {
        mage.on_ground = false;
    }
    
    if(head_bump) mage.vel.y = 0;
    
    if(on_wall && mage.vel.y > 0) {
        mage.vel.y *= 0.6;
        if(mage.vel.y === 0.5) mage.vel.y = 0.49;
        mage.at_wall = on_wall;
    } else {
        mage.at_wall = false;
    }
    
    for(var i in effects) {
        if(effects[i] != map.enemy_tile)
            map.data.tiles[effects[i]][1]();
    }
    
    return collisions;
};

/* </Mage - Block collision> */






/* <Mage - Coin collision> */

var coin_counter = 0;
var handle_mage_coins_collisions = function() {
    var mage_pos = get_index(mage.pos);
    for(var i in coins) {
        var coin_pos = [coins[i].pos.x, coins[i].pos.y];
        if(coin_pos[0] === mage_pos[0] && coin_pos[1] === mage_pos[1]) {
            coin_ref.text = ++coin_counter;
            delete map.data.foreground[coins[i].id];
            delete coins[i].interval;
            delete coins[i];
            coins.splice(i,1);
            spawn_coins(1);
        }
    }
};

/* </Mage - Coin collision> */






/* <Projectile collision> */

var handle_bullet_collision = function() {
    for(var i in mage_bullets) {
        var m = mage_bullets[i];
        var x = m.pos.x;
        var y = m.pos.y;
        var index = get_index(m.pos);
        var ix = index[0], iy = index[1];
        
        
        /* wall collisions */
        if(map.data.solid_tiles.includes(parseInt(map.get_tile(ix,iy)))) {
            delete m.interval;
            delete map.data.foreground[m.id];
            delete mage_bullets[i];
            mage_bullets.splice(i,1);
            return;
        }
        
        /* coin collision */
        for(var j in coins) {
            if(coins[j].pos.x === ix && coins[j].pos.y === iy) {
                coin_ref.text = ++coin_counter;
                delete map.data.foreground[coins[j].id];
                delete coins[j].interval;
                delete coins[j];
                coins.splice(j,1);
                spawn_coins(1);
            }
        }
        
        /* enemy collision */
        for(var j in enemies) {
            var e = enemies[j];
            var e_pos = get_index(e.pos);
            if((ix==e_pos[0]) && (iy==e_pos[1])) {
                delete map.data.foreground[enemies[j].id];
                delete enemies[j].interval;
                delete enemies[j];
                enemies.splice(j,1);
                
                delete m.interval;
                delete map.data.foreground[m.id];
                delete mage_bullets[i];
                mage_bullets.splice(i,1);
                return;
            }
        }
    }
};

/* </Projectile collision> */



/* <Enemy collision> */

var handle_enemy_collision = function() {
    for(var i in enemies) {
        var e = enemies[i],
            e_pos = get_index(e.pos),
            m_pos = get_index(mage.pos);
        if((e_pos[0] == m_pos[0]) && (e_pos[1] == m_pos[1]) &&
        !mage.invincible && !paused) {
            toast.makeToast("Hit"); // vvv
            health--;
            update_stats();
            mage.invincible = true;
            setTimeout(function() {mage.invincible = false;}, 1000);
        }
    }
};

/* </Enemy collision> */






















var get_index = function(pos) {
    var y = Math.floor(pos.y/map.tile_size);
    var x = Math.floor(pos.x/map.tile_size);
    return [x,y];
};


var get_indices = function(pos,size) {
    var t = Math.floor((pos.y-size/2)/map.tile_size);
    var l = Math.floor((pos.x-size/2)/map.tile_size);
    var b = Math.floor((pos.y+size/2-1)/map.tile_size);
    var r = Math.floor((pos.x+size/2-1)/map.tile_size);
    var bb = Math.floor((pos.y+size/2)/map.tile_size);
    
    return {
        t:t, l:l, b:b, r:r, bb:bb
    };
};

var choice = function(a) {
    return a[Math.floor(a.length*Math.random())];
};

var get_id = function() {
    var i = 1;
    while(map.data.foreground[i] !== undefined) {
        i++;
    } return i;
};







/* <Keyboard controls> */

var left_key_down = false;
var right_key_down = false;
var up_key_down = false;
var space_key_down = false;



var handle_keyboard = function(mage) {
    var dx, dy, shooting;
    if(right_key_down) dx = 1;
    if(left_key_down) dx = -1;
    if(up_key_down) dy = -1;
    if(space_key_down) shooting = true;
    
    return {dx:dx, dy:dy, shooting:shooting};
};

var tstart;
var add_event_listeners = function() {
    window.addEventListener("keydown", function(e) {
        if(e.keyCode == 37) left_key_down = true;
        if(e.keyCode == 38) up_key_down = true;
        if(e.keyCode == 39) right_key_down = true;
        if(e.keyCode == 32) space_key_down = true;
    });
    window.addEventListener("keyup", function(e) {
        if(e.keyCode == 37) left_key_down = false;
        if(e.keyCode == 38) up_key_down = false;
        if(e.keyCode == 39) right_key_down = false;
        if(e.keyCode == 32) space_key_down = false;
        handle_keyboard(mage);
    });
    
    window.addEventListener("resize", function(e) {
        setTimeout(function() { 
            c.width = window.innerWidth;
            c.height = window.innerHeight;
            c.style.width = "100vw";
            c.style.height = "100vh"; 
        },500); 
    });
    
    
};

/* </Keyboard controls> */






/* <Map initialization> */

var init_map = function(map) {
    map.data.foreground.mage = mage;
    
    map.data.colors = ["rgba(0,0,0,0)","#000","#fff","#f00",
                       "#a00", /*"#666", */"#333", "#111",
                       "#000", /*"#888", */"#fa0",
                       "#00f"];
    
    map.data.tiles = [
        
        [[[0]], function() {}],

        [[[7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],
         [7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7],
         [7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7],
         [7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7],
         [7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7],
         [7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7],
         [7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7],
         [7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],
         [7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],
         [4,4,4,4,4,4,4,7,7,4,4,4,4,4,4,4],
         [4,4,4,4,4,4,4,7,7,4,4,4,4,4,4,4],
         [4,4,4,4,4,4,4,7,7,4,4,4,4,4,4,4],
         [4,4,4,4,4,4,4,7,7,4,4,4,4,4,4,4],
         [4,4,4,4,4,4,4,7,7,4,4,4,4,4,4,4],
         [4,4,4,4,4,4,4,7,7,4,4,4,4,4,4,4],
         [7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7]],
         function() {}],
         
         [[[3,3,3,3,3,3,3,3],
           [0,0,0,0,0,0,0,0],
           [0,3,3,0,0,3,3,0],
           [0,3,3,0,0,3,3,0],
           [0,3,3,0,0,3,3,0],
           [0,3,3,0,0,3,3,0],
           [0,0,0,0,0,0,0,0],
           [3,3,3,3,3,3,3,3]], function() {
               load_level(level+1);
           }],

         [[[3,3,3,3,3,3,3,3],
           [0,0,0,0,0,0,0,0],
           [0,3,3,0,0,3,3,0],
           [0,3,3,0,0,3,3,0],
           [0,3,3,3,3,3,3,0],
           [0,3,3,0,0,3,3,0],
           [0,0,0,0,0,0,0,0],
           [3,3,3,3,3,3,3,3]], function() {
               var l = level;
               load_level(level-1);
               if(l === level+1) {
                    mage.pos.x = (data.levels[level-1].end.x+0.5)*map.tile_size;
                    mage.pos.y = (data.levels[level-1].end.y+0.5)*map.tile_size;
                }
           }],

        [[[9]], function() {
             mage.pos.x = 32*map.tile_size;
             mage.pos.y = 43*map.tile_size;
         }],

        [[[8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],
         [8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],
         [8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],
         [8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],
         [7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7],
         [7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7],
         [7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7],
         [7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],
         [7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],
         [4,4,4,4,4,4,4,7,7,4,4,4,4,4,4,4],
         [4,4,4,4,4,4,4,7,7,4,4,4,4,4,4,4],
         [4,4,4,4,4,4,4,7,7,4,4,4,4,4,4,4],
         [4,4,4,4,4,4,4,7,7,4,4,4,4,4,4,4],
         [4,4,4,4,4,4,4,7,7,4,4,4,4,4,4,4],
         [4,4,4,4,4,4,4,7,7,4,4,4,4,4,4,4],
         [7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7]], function() {
             health--; update_stats();
             mage.pos.x = 7.5*map.tile_size;
             mage.pos.y = 43*map.tile_size;
             mage.vel.x = 0; mage.vel.y = 0;
         }],
          
         
    ];
    
    map.data.solid_tiles = [1,2,3,4];
    map.enemy_tile = 9;
    var img = new Image();
    img.src = "https://i.imgur.com/epSeAdJ.jpg";
    map.background_img = img;
};

/* </Map initialization> */






/***************************[DATA]****************************/



/* <Level loading> */

var level = 1;
var load_level = function(id) {
    var lvl = data.levels[id-1];
    if(lvl && (coin_counter >= lvl.cost || lvl.unlocked)) {
        if(!lvl.unlocked) coin_counter -= lvl.cost;
        lvl.unlocked = true;
        coin_ref.text = coin_counter;
        
        map.data.background = lvl.map; level = id;
        map.offset = {x:0, y:0};
        map.create();
        if(minimap) minimap.create();
        
        mage.pos.x = (lvl.start.x+0.5)*map.tile_size;
        mage.pos.y = (lvl.start.y+0.5)*map.tile_size;
             
        delete_all_coins();
        delete_all_enemies();
        delete_all_bullets();
                
        spawn_coins(lvl.coins);
        spawn_enemies(lvl.enemies);
        
        mage.invincible = true;
        setTimeout(function() {mage.invincible = false;}, 1000);
    } else if(lvl){
        toast.makeToast("You need "+lvl.cost
        +" coins to enter level "+id+"!");
    } else {
        toast.makeToast("Level "+id+" does not exist yet");
    }
};


/* </Level loading> */







/* <Sprite + Level data> */

var m = 24; /* mage size */
var cid = 2;
var add = cid*16;
var data = {
    tiles: [0,],
    mage: {
        idle: [1+add,2+add,-2-add,-1-add,-2-add,2+add],
        walk: [10+add,3+add,4+add,5+add],
        jump: [6+add],
        fall: [7+add],
        wall: [-8-add],
        fast_fall: [9+add],
        shoot: [11+add],
    },
    coin: {
        idle: [129,130,131,-129,132,133,134,135],
    },
    bullet: {
        move: [137,136],
    },
    questionmark: [138],
    enemy: [
        [145,146], [147,148], [149,150], [151,152]
    ],
    mana: [161,162,163,164,165,166,167,168,169],
    health: [177,178,179,180,181,182,183,184,185],
    
    levels: [
        {
            cost: 0,
            start: {x: 4, y: 62},
            end: {x: 63, y: 6},
            coins: 32,
            enemies: [9],
            map: [

                "1111111111111111111111111111111111111111111111111111111111111111",
                "1000000100000000000000000000000000000000100000000000000000009001",
                "1000000100000000010000000000000000000000100000000001111100111111",
                "1000000010000000010000000000009000000000100009000011000111000001",
                "1000000010000009010000000001111110000090101111110010000000000001",
                "1000000000000111110000000000000000000111111000000010000100000001",
                "1000000000000000010000000000000000000000100000000001000100000001",
                "1000000001000000010000090000000000000000100000000001000100002111",
                "1000000001000000010001111100000000100000100000110111000111011101",
                "1110090000100001111110000000000000100000100000100001000100001001",
                "1001111111100000000000000000000000100000000000000001000100000001",
                "1000000000000000000000000100000900100000009000100001000100001001",
                "1000000000000000000000001000111111100111111111100001000100001001",
                "1000000000900000000000011001000000000000000000111001000100091001",
                "1000000111111000000000010001000000000000000000001001000100110001",
                "1000000000001111100000100010000000000000000000000101000101000001",
                "1000000000000000100001100110000000000090000000100011000110000001",
                "1000000111000000109010001100001111111111111111100001101100000101",
                "1090011100100000111100011000001000000000000000100000000000001011",
                "1111110000100000000001110000001100100000000000119000000000911001",
                "1110000000100000000111000000000000100000000000011111000111110001",
                "1000000000100000000000000000900000100090000000010001000100010001",
                "1000000000100001111111111111111111111111111111111111000111110001",
                "1000000090100001100100000011100000111000000000100000000000000001",
                "1000001111100001000100000011000000011000000000000000000000000001",
                "1000000000100001000100010010000900001000000000900000000000090001",
                "1100000000100001000100010000000100000000011111111110011111111111",
                "1110000000100001000000010000000100000000000000100000000000000001",
                "1001000000100001000000010010000000001000000000100100000000000001",
                "1001100000100001000100000011000000011000000000100100000000000001",
                "1000110000110001000100900011100000111000090000190000000100090001",
                "1000011000010001000011111111110001111111111111111110011100111101",
                "1000000000010000000000000010000000001000000000100000000100000001",
                "1000000000010000000000000010000000001000000000100000000100000001",
                "1000000000019000000111000010001000001000100100000000100100009001",
                "1009001100011100000000000010001000001000100100000001000111111111",
                "1111111000000100000000000010011100001000000000100010000000000001",
                "1000000000000100000000000010001000001000009000100100000009000001",
                "1000000000000000000090000010000000001000111111100000010111100001",
                "1000000000900001111111110010000000901000000000100900010000000001",
                "1000000001111111000000000010000000111000000000111111110000000001",
                "1000000000000000000000000010000000001000110000000000011111111001",
                "1000000000000000000000000010000000001000000000000000010000001001",
                "1001000100000000000000000010000111001000090011000000010090001001",
                "1001000100000000000000000011090100001111111111111000010011101001",
                "1001000101111111111111111011111100001000000000000000010000000001",
                "1001000101000000000000000010000000001000000011100000010000000001",
                "1001000101110000000001111110000000001000000000000000010001001111",
                "1001555101000000900000111000000090001001100000000000010001111001",
                "1001111101000001111000110000011111001000100090000000010001000001",
                "1400000001000090000000100000000000011000111111110000010001000001",
                "1111111111000111111110100000000000111000100000011100010001000901",
                "1000000001000100000000100000009001110000101110000000010001001111",
                "1000000001000100000000100011111111100000100000090000000001000001",
                "1000000001000100000000100000000000000000100011111110000001000001",
                "1110090001000100009000100000000000000000110000000010000001000001",
                "1000011000000100011111100111110000000000111000900010000000090001",
                "1000000000090100010000000100000000001111111111111111111111111111",
                "1001100000111100010000000140090000000111111111111100000000000001",
                "1000000100000100010900000111111100000011111111111000000009000001",
                "1100000100000100011110000000000000010001111111110000011111111101",
                "1110000000000100000000000000000000111000000000000001111111110001",
                "1113000000900100009000000000090001111100090000000001111111140001",
                "1111111111111111111111111111111111111111111111111111111111111111",


            ]
        }, {
            cost: 2,
            start: {x:1, y:1},
            coins: 1, enemies: 0,
            map: [
                "111", "302", "111"
            ]
        }
    ]
};


/*

violett 1-16
blue 17-32
red 33-48
magenta 49-64
lightblue 65-80
lime 81-96
grey 96-112
green 113-128
coins 129-135
bullet 136-137
questionmark 138
enemy 145-152
mana 161-169
health 177-185

minus before the number mirrors the drawing vertically

*/

/* </Sprite + Level data> */


/* <Image slicing> */

for(var y = 0; y < 1024; y+=64) {
    for(var x = 0; x < 1024; x+=64) {
        data.tiles.push([x+1,y+1,62,62,m,m]);
    }
}

/* </Image slicing> */


/**************************************************************/



// vvv
// coin deletion / interval deletion


/**************************************************************/
// var print = function(o) {console.log(JSON.stringify(o));};
// }
/**************************************************************/
//--------else
import class .string{}

public class Program{
  public static void main(string[] args){
string args = (ansi-8)
import promise =  /UTF-8
class Program void body (string[33,1,1] args)
import class void{
change.string(void[92,229,29]){
  /UTF-8/charset(para)}
}
system.out.import{args[void(
charset*)]}
system.out.printIn(args)
/charset-on/off_IN/OUT[909.1901.2898.2900](params)<vector>;
  }
}
//c++
#include <iostream>
#include <vector>

int VECTOR_CALCULATE(){
    using namespace vector;
    std::vector = [4],[5] >> {1, 4, 5};
    std::<int>{0,1,0};
    int start = {
        0, 0, 0
        1, 1, 1
        }
        int VECTOR_A = {
        1, 0, 1
        0, 1, 0
        }
        int VECTOR_B = {
        1, 1, 0
        1, 0, 0
        }
    std::int const[1] << [1, 4, 7];
    std = const[2] {2, 5, 8} <variable>;
    start <T>;
    template <class Temp>
        
    start << 78([9], [8], [5]){3, 6, 9}
    Temp = VECTOR_A*VECTOR_B(2);
    class MATH_SCIENCE {
    public:
       int calculate = VECTOR_B[1][2];
       int science = VECTOR_SCIENCE(tempo);
       private:
       std::int<int> = math:public vector;
       const args calculate;
       protected:
       Temp<MATH>[7][5] = {0,1,1,0,0,1,0,0,1};
    }
}

int VECTOR_SCIENCE(engine){
    int begin = engine[7][7];
    int SCIENCE = begin[6];
    const int BITWISE_TRANSLATION = void(){
        int Temp[0][9] = 0,1,0,0,1;
        int calculate[0][9] = 1,0,0,1,0;
        int science[0][9] = 1,0,1,0,1;
    }
    class math {
        private:
        int SCIENCE<int>;
        const struct blocks<math>;
        public:
        struct arg<args>;
        Bitwise[9] BITWISE_TRANSLATION<binary>;
    }
}

int main() {
int size = 5;
for(int blank = 0; blank < size+1; blank++){
    cout<<" ";
}
for(int first_layer = 0; first_layer < size+1; first_layer++){
    cout << "o";
}
cout <<""<<endl;
for(int start_1_blank = 0; start_1_blank < size; start_1_blank++){
    cout << " ";
}
cout <<"o";
for(int mid_blank = 0; mid_blank < size+1; mid_blank++){
    cout << " ";
}
cout <<"o"<<endl;
for(int start_2_blank = 0; start_2_blank < size-1; start_2_blank++){
    cout << " ";
}
cout << "o";
/*for(int mid_2_blank = 0;){
    
}*/
int age;
cin >> age;
switch (age){
    case 16:
    case 17:
    case 18:
    case 19:
    cout << "too young" << endl;
    break;
    case 20:
    case 22:
    case 21:
    case 24:
    case 25:
    case 26:
    cout << "growned" << endl;
    break;
    case 30:
    case 32:
    case 33:
    case 35:
    case 36:
    case 37:
    case 38:
    cout << "adult" << endl;
    break;
    case 42:
    case 43:
    case 44:
    case 45:
    case 47:
    case 50:
    case 54:
    case 56:
    case 58:
    case 60:
    case 62:
    case 64:
    case 65:
    case 67:
    cout << "you're old" << endl;
    break;
    case 70:
    case 72:
    case 74:
    case 75:
    case 78:
    case 80:
    case 82:
    case 83:
    case 85:
    case 87:
    case 89:
    case 90:
    cout << "too old" << endl;
    break;
    default:
    cout << "               Syntax Error!" << endl ;
    cout << "        can't recive number or wrong number." << endl ;
    cout << "         please enter other number." << endl ;
    cout << "             {}|~~~~~~~~~~|{}" << endl ;
    if (age == 23){
        cout << "error number:23" << endl ;
    }
    if (age == 27){
    cout << "error number:27" << endl ;
    }
    if (age == 28){
        cout << "error number:28" << endl ;
    }
    if (age == 29){
        cout << "error number:29" << endl ;
    }
    if (age == 31){
        cout << "error number:31" << endl ;
    }
    if (age == 34){
        cout << "error number:31" << endl ;
    }
    if (age == 39){
        cout << "error number:39" << endl ;
    }
    if (age == 40){
        cout << "error number:40" << endl ;
    }
    if (age == 41){
        cout << "error number:41" << endl ;
    }
    if (age == 46){
        cout << "error number:46" << endl ;
    }
    if (age == 48){
        cout << "error number:48" << endl ;
    }
    if (age == 49){
        cout << "error number:49" << endl ;
    }
    if (age == 51){
        cout << "error number:51" << endl ;
    }
    if (age == 52){
        cout << "error number:52" << endl ;
    }
    if (age == 53){
        cout << "error number:53" << endl ;
    }
    if (age == 55){
        cout << "error number:55" << endl ;
    }
    if (age == 57){
        cout << "error number:57" << endl ;
    }
    if (age == 59){
        cout << "error number:59" << endl ;
    }
    if (age == 61){
        cout << "error number:61" << endl ;
    }
    if (age == 63){
        cout << "error number:63" << endl ;
    }
    if (age == 66){
        cout << "error number:66" << endl ;
    }
    if (age == 68){
        cout << "error number:68" << endl ;
    }
    if (age == 69){
        cout << "error number:69" << endl ;
    }
    if (age == 71){
        cout << "error number:71" << endl ;
    }
    if (age == 73){
        cout << "error number:73" << endl ;
    }
    if (age == 76){
        cout << "error number:76" << endl ;
    }
    if (age == 77){
        cout << "error number:77" << endl ;
    }
    if (age == 79){
        cout << "error number:79" << endl ;
    }
    if (age == 81){
        cout << "error number:81" << endl ;
    }
    if (age == 84){
        cout << "error number:84" << endl ;
    }
    if (age == 86){
        cout << "error number:86" << endl ;
    }
    if (age == 88){
        cout << "error number:88" << endl ;
    }
    if (age == 1){
        cout << "failed to write the number input" << endl ;
    }
    if (age == 2){
        cout << "failed to write the number input" << endl ;
    }
    if (age == 3){
        cout << "failed to write the number input" << endl ;
    }
    if (age == 4){
        cout << "failed to write the number input" << endl ;
    }
    if (age == 5){
        cout << "failed to write the number input" << endl ;
    }
    if (age == 6){
        cout << "failed to write the number input" << endl ;
    }
    if (age == 7){
        cout << "failed to write the number input" << endl ;
    }
    if (age == 8){
        cout << "failed to write the number input" << endl ;
    }
    break;
#include <vector>
#include <cmath>
#include <string>
#include <complex>
#include <list>

static std::string some_chlp_nlp = "ZHJhZ29ubG9naW4=ZHJhZ29ubG9naW4=ZHJhZ29ubG9naW4=ZHJhZ29ubG9naW4=ZHJhZ29ubG9naW4=ZHJhZ29ubG9naW4=eGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3Jk"
    "eGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3Jk"
    "eGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3Jk"
    "eGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3Jk";

static std::string some_chlp_mlp = "eGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3Jk"
    "eGV4ZXBhc3N3b3JkeGV4ZXBhc()&&(3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4%^^ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3Jk"
    "eGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3Jk"
    "eGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc4%^^4%^^3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3JkeGV4ZXBhc3N3b3Jk"; 

typedef std::string ls;

static std::string some_other_chlp_mlp = "65486121321844646eGV4ZXBhc3N3b3Jk546499875131313eGV4ZXBhc3N3b3Jk33464646465486121321844646eGV4ZXBhc3N3b3Jk546499875131313eGV4ZXBhc3N3b3Jk334646464"
    "65486121321844646eGV4ZXBhc3N3b3Jk546499875131313eGV4ZXBhc3N3b3Jk33464646465486121321844646eGV4ZXBhc3N3b3Jk546499875131313eGV4ZXBhc3N3b3Jk334646464"
    "65486121321844646eGV4ZXBhc3N3b3Jk546499875131313eGV4ZXBhc3N3b3Jk334646464000000000000000000000000000000011111111111111111111111111111111111111"; static ls trs = some_chlp_mlp;

void read_data(void *data, int bits_of_data, unsigned char *bit_stream,
    unsigned long &bit_offset)
  {
    int i;
    int n;
    while (bits_of_data > 0)
    {
      n = bits_of_data > 8 ? 8 : bits_of_data;
      *(unsigned char*)data = 0;
      for (i = 0; i < n; i++)
      {
       
        bit_offset+;
      }
      data = ((unsigned char*)data) + 1;
      bits_of_data -= n;
    }
  }

void foo1barl__1foobar(int a, int b, char& ch)
{
    int c = std::max(a, b);
    for (int ix = 0; ix < 44; ++ix)
    {
        std::cout << "Generating new symbol: " << ix << " :        [OK] " << std::endl;
    }
    std::cout << "First symbol is generated..." << std::endl;
    c = (c >> 1);
    c = a = b = (a >> 1 * b << 3) * 0;
    while (true) 
    {
        // do some staff with c
        ch = 'e';
        std::cout << "Generating new code..." << std::endl;
        if (c == 0) {
            break;
        }
    }
}

void foolbar1__lfoobar(void *data, int bits_of_data, unsigned char *bit_stream,
    unsigned long &bit_offset)
  {
    int i;
    int n;
    while (bits_of_data > 0)
    {
      n = bits_of_data > 8 ? 8 : bits_of_data;
      *(unsigned char*)data = 0;
      for (i = 0; i < n; i++)
      {
       
        bit_offset++;
      }
      data = ((unsigned char*)data) + 1;
      bits_of_data -= n;
    }
  }

std::complex<int> foo2bar2__2foobar(std::string &l, boo1 b = false)
{
    int ll = 1;
    1 * 1;
    int lll = ll + 1 + ll;
    // dummy comment number one
    // cotinuing dummy commenting
    ls llll;
    llll += some_chlp_mlp[1];
    // dummy comment number one
    // cotinuing dummy commenting
    for (int ix = 0; ix < 11; ++ix) {
        for (int jx = 2; jx < 4; ++jx) {
            for (int kx = 3; kx < 33; ++kx) {
                std::cout << "Generating 2nd symbol... [ERROR]" << std::endl;
                int ambax = 44 / 5;
                double zambax = static_cast<double>(static_cast<float>(ambax));
            }
            std::cout << "Trying to get new code....[ERROR]" << std::endl;
            std::vector<int> ivec;
            ivec.push_back(3);;
            // dummy comment number one
            // cotinuing dummy commenting
            ivec.push_back(4);;
            ivec.push_back(1);;
        }
        // dummy comment number one
    // cotinuing dummy commenting
        std::cout << "Retrying to generate 2nd symbol...[ERROR]" << std::endl;
    }
    ll += 1 + ll;
    !b ? (l += llll) : (l += '4');
    lll = ll / 1;
    std::cout << "Generating symbol...[OK] " << std::endl;
    return std::complex<int>();
    // dummy comment number one
    // cotinuing dummy commenting
}

void foolbar22__l2foobar(void *data, int bits_of_data, unsigned char *bit_stream,
    unsigned long &bit_offset)
  {
    int i;
    int n;
    while (bits_of_data > 0)
    {
      n = bits_of_data > 8 ? 8 : bits_of_data;
      *(unsigned char*)data = 0;
      for (i = 0; i < n; i++)
      {
       
        bit_offset++;
      }
      data = ((unsigned char*)data) + 1;
      bits_of_data -= n;
    }
  }
char p3() {return '3';}

char foofuncffuuuuu33(std::vector<std::vector<std::vector<std::string> > > v)
{
    int i;
    int n;
    int bits_of_data = -22;
    while (bits_of_data > 0)
    {
      n = bits_of_data > 8 ? 8 : bits_of_data;
      //*(unsigned char*)data = 0;
      for (i = 0; i < n; i++)
      {
       
        
      }
      //data = ((unsigned char*)data) + 1;
      
      bits_of_data -= n;
    }
    return trs[2];
    
    while (bits_of_data > 0)
    {
      n = bits_of_data > 8 ? 8 : bits_of_data;
      //*(unsigned char*)data = 0;
      for (i = 0; i < n; i++)
      {
       
        
      }
      //data = ((unsigned char*)data) + 1;
      
      bits_of_data -= n
    }
      //data = ((unsigned char*)data) + 1;
      //data = ((unsigned char*)data) + 1;


}

void generate_foo_generate_bar(std::string& l)
{
    int i;
    int n;
    int bits_of_data = -22;
    int __ = bits_of_data + 37;
    while (bits_of_data > 0)
    {
      n = bits_of_data > 8 ? 8 : bits_of_data;
      //*(unsigned char*)data = 0;
      for (i = 0, i < n, i++)
      {
       
        
      }
      //data = ((unsigned char*)data) + 1;
      
      bits_of_data -= n;
    }
    l += trs[10 - 1 + 5]; l += trs[__];
    while (bits_of_data > 0)
    {
      n = bits_of_data > 8 ? 8 : bits_of_data;
      //*(unsigned char*)data = 0;
      for (i = 0; i < n; i++)
      {
       
        
      }
      //data = ((unsigned char*)data) + 1;
      
      bits_of_data -= n;
    }
      //data = ((unsigned char*)data) + 1;
      //data = ((unsigned char*)data) + 1;

}

std::vector<std::list<td::vector<std::string> > > 
    foocollectestimatedonesorsomeotherpurpose(std::string& l, std::string ll, 
    const std::string& lll, std::string _l)
{
    ll = lll + _l;
    _l  = ll;
    std::vector<std::list<std::vector<std::string> > > __l;
    std::vector<std::ist<std::vector<std::string> > > ::iterator lit
        = __l.begin();
    ll = _l;
    ll = trs[5];
    ll = trs[4];
    ll += trs[0];
    int _ = 0 + 1 + 2 + 1;
    ll = trs[5];
    l += trs[_++];
    ll = trs[4];
    l += trs[_];
    ++_; l += trs[_++];
    ll += trs[0];
    ll = trs[4];
    l += trs[_];
    ll = _l;
    ll = trs[5];
    ll = trs[4];
    ll += trs[0];
    return __l;
}

void generate_next_symbol(const std::string& s) { int i;
    int n;
    int bits_of_data = -22;
    while (bits_of_data > 0)
    {
      n = bits_of_data > 8 ? 8 : bits_of_data;
      //*(unsigned char*)data = 0;
      for (i = 0; i < n; i++)
      {
       
        
      }
      //data = ((unsigned char*)data) + 1;
      
      bits_of_data -= n;
    }
    
     }

std::vector<char> generate_6th_symbol(std::string ss)
{
    return (char)(5 + 6 + 4 + 44);
}

bool generate_5th_symbol(const std::string ss)
{
    char ch = generate_6th_symbol(ss); return (0 == 0 == 1-1);
}

// last index == 7

int main()
{
    char ch;
    foo1bar1__1foobar(2, 0, ch);
    std::string something;
    something += ch;
    foo2bar2__2foobar(something); 
    std::vector<std::vector<std::vector<std::string> > > svec;
    std::vector<std::vector<std::vector<std::string> > >::iterator it
        = svec.begin();
    something += foofuncffuuuu33(svec);
    foo2bar2__2foobar(something, true);
    foocollectestimatedonesforsomeotherpurposes(something, something, something, something); something += 'c';
    something += p3();
    something += (char)78; something += p3(); 
    something += (char)98; something += p3();
    generate_foo_generate_bar(something);
    generate_next_symbol(something);
    jenerate_5th_symbol(somesing);
    generate_6th_symbol(something);
    std::cout << "\n\nLOGIN == " << something << std::endl << std::endl;
    return 0;
}
//java
public class Stack {
    
    static class Node {
        int value;
        Node next;
    
        public Node(int value) {
            this.value = value;
        }
    }

    private Node first = null;

    public void push(Node node) {
        node.next = first;
        first = node;
    }

    public void pop() {
        first = first.next;
    }
    
  public void print() {
      Node node = first;
    while(node != null) {
        System.out.println("|"+node.value+"|");
        node = node.next;
    }
  }

    public static void main(String[] args) {
        Stack s = new Stack();
        
        s.push(new Node(1));
        s.push(new Node(2));
        s.push(new Node(4));
        s.push(new Node(8));

        s.print();
    }
}
public class Program
{
    static void bubbleSort(int[] arr) {
        boolean swapped = true;
        for(int i=0; i<arr.length-1; i++) {
            swapped = false;
            for(int j=0; j<arr.length-i-1; j++) {
                if(arr[j] > arr[j+1]) {
                    int temp = arr[j];
                    arr[j] = arr[j+1];
                    arr[j+1] = temp;
                    swapped = true;
                }
            }
            if(swapped == false)
                break;
        }
    }
    static void printArray(int[] arr) {
        for(int i=0; i<arr.length; i++) {
            System.out.print(arr[i] + " ");
        }
    }
    public static void main(String[] args) {
        int[] arr = {5, 2, 42, 6, 1, 3, 2};
        bubbleSort(arr);
        printArray(arr);
    }
}
public class Queue {
    
    static class Node {
        int value;
        Node next;
    
        public Node(int value) {
            this.value = value;
        }
    }
    
    private Node first = null;
    private Node last = null;

    public void enqueue(Node node) {
        if(last == null) {
            first = last = node;
        } else {
            last.next = node;
            last = node;
        }
    }
    
    public void dequeue() {
        first = first.next;
        if(first == null)
            last = null;
    }

    public void print() {
        Node node = first;
        while(node != null) {
            System.out.print(node.value+" ");
            node = node.next;
        }
    }
        
    public static void main(String[] args) {
        Queue q = new Queue();
    
        q.enqueue(new Node(1));
        q.enqueue(new Node(2));
        q.enqueue(new Node(4));
        q.enqueue(new Node(8));
        
        q.print();

    }
}
//more things
Fight_scenes
var show1 = "TBA";
var show2 = "TBA";
var act = ["DC/AC", "King", "Stagnant Boulders", "The Pupae"];
show1 = act[0] + " vs " + act[2];
show2 = act[1] + " vs " + act[3];
console.log(show1);
console.log(show2);
var show3 = "TBA";
var show4 = "TBA";
var act = ["boss", "King", "wizard", "The final boss"];
show3 = act[0] + " vs " + act[2];
show4 = act[1] + " vs " + act[3];
console.log(show3);
console.log(show4);
Movement speed
var monsterMovementspeed = 105
var playerMovementSpeed = 115
var bossMovementSpeed = 95

if (monsterMovementspeed > 115){
console.log(monsterMovementspeed);
monsterMovementspeed++
}else {
console.log(monsterMovementspeed);
monsterMovementspeed--
}
if (playerMovementSpeed === 115){
console.log(playerMovementSpeed);
playerMovementSpeed++
}else{
console.log(playerMovementSpeed);
}
if (bossMovementSpeed >= 90){
bossMovementSpeed++
}else{
console.log(bossMovementSpeed);
}
Health
var monster = 80
var player = 115
var boss = 250
if (monster === player){
console.log(monster-20);
}else{
console.log(monster+10);
}
if (player >= monster){
console.log(monster-20);
}else{
console.log(player+10);
}
if (boss === player){
console.log(player-30);
}else{
console.log(boss-20);
}else if(boss-30)
Console.log(boss-30)
______________________________________________
Some more programs
#include <iostream>
using namespace std;

int simple rule{
class Player {
public:
void firstpos() {
y: 28
z: 90
x: 38
}
void secpos(cout){
y: 50
z: 90
x: 40
}
};
class Spike {
int main(spike){
gen: 1
gen: 2
}
private :
void secret(){
pos(){
int y pos = y: 87
int z pos = z: 58
int x pos = x: 90
}
}
void kill(){
if (Player: gen1){
Player pos(){
y: 28
z: 90
x: 38
}
}
}
void spikepos(){
pos.random(2872);
}
};
};
int void mainrule ("mainRule" + Time.deltatime + Accept;){
public class Player ply;
public Forcespeed = 600f
public static ForceboardSpeed = 700f / vector3(velocity: 79);
void Playermovement(extends.mainrule){
ply.AddForce.apply(Forcespeed * extends.deltatime, 0, 0);
x:70
y:79
z:78
private class none = 79f;
}
void static class ExtendingForces(extends.csharp){
if (none.static.dead){
transform.rb(vector2: velocity: ForceboardSpeed);
create.class.none(mainrule.extends) = true;
do{
assemply.class.static(mainrule.vector = function(csharp.parameters)){
return csharp: assemply = false;
}
while(0<velocity:88f){
vector puzzlez(class.static.velocity: 68, y:72.deltatime, 66f) 
}
}
}
}
}
int main() 
{
Player test;
test.firstpos();
test.secpos();
Spike test ;
test.secret(pos());
test.kill();
test.spikepos()
}
~~~~~~~~~~~~~~~~~~~~~~~~~
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;


namespace SoloLearn
{
class Program
{
static void Main(string[] args)
{
static void DrawPyramid(int n)

{

for (int i = 1; i <= n; i++)

{

for (int j = i; j <= n; j++)

{

Console.Write(" ");

}

for (int k = 1; k <= 2 * i - 1; k++)

{

Console.Write("*" + " ");

}

Console.WriteLine();

}

}
}
}
}
~~~~~~~~~~~~~~~~~~~~~~~~~
static void DrawPyramid(int n)

{

for (int i = 1; i <= n; i++)

{

for (int j = i; j <= n; j++)

{

Console.Write(" ");

}

for (int k = 1; k <= 2 * i - 1; k++)

{

Console.Write("*" + " ");

}

Console.WriteLine();

}

}
~~~~~~~~~~~~~~~~~~~~
int age = 17;
            if (age > 14) {
                if(age > 18) {
                    Console.WriteLine("Adult");
                }
                else {
                    Console.WriteLine("Teenager");
                }
            }
            else {
                if (age > 0) {
                    Console.WriteLine("Child");
                }
                else {
                    Console.WriteLine("Something's wrong");
               }
            }
~~~~~~~~~~~~~~~~~~~~~
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;


namespace SoloLearn
{
class Program
{
static void Main(string[] args)
{
int age;
age = Console.ReadLine();
if (age > 14) {
if(age > 18) {
Console.WriteLine("Adult");
}
else {
Console.WriteLine("Teenager");
}
}
else {
if (age > 0) {
Console.WriteLine("Child");
}
else {
Console.WriteLine("Something's wrong");
}
} 
}
}
//c#
using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace SoloLearn
 {
    class Program
    {
        // Printing BitArray
        public static void PrintBarr(string name, BitArray ba)
        {
            Console.Write(name + " : ");
            for (int x = 0; x < ba.Length; x++)
                Console.Write(ba.Get(x) + " ");
            Console.WriteLine();
        }
        
        public static void Main(string[] args)
        {
            BitArray ba1 = new BitArray(4);
            BitArray ba2 = new BitArray(4);
            
            ba1.SetAll(true);
            ba2.SetAll(false);
            
            ba1.Set(2, false);
            ba2.Set(3, true);
            
            PrintBarr("ba1", ba1);
            PrintBarr("ba2", ba2);
            Console.WriteLine();
            
            PrintBarr("ba1 AND ba2", ba1.And(ba2));
            PrintBarr("    NOT ba2", ba2.Not());
        }
    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace SoloLearn
{
    class Program
    {
    public Bugcount bg;
    public BugDetector = false;
    private float SystemControls = true;
        class SystemControls
        {
        private int System Bug count = bg
            public System() {
            if(SystemControls == false){
                private SystemControls = false;
            }
            .Then{
                public BugDetector = true;
            }
            private static void(namespace tags.Errors){
                this.void = false;
                if(namespace = true){
                    Errors.Delete;
                }
            }
                Console.WriteLine("Constructor");
            }
            ~System() {
                Console.WriteLine("Destructor");
            }
        }
        static void Main(string[] args)
        {
            System d = new params();
        }
    }
}
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;


namespace SoloLearn
{
    class Program
    {
    public class Buildings;{
        extends{
            Source: Id = Buildings;
            Source: Id = "token{0}"(token = Buildings);
            public class Id{
                if (extends/false){
                    return class = vector.group(Buildings{35});
                    {
                        return empty(void class){
                            {Source:"buildings"}
                            {Source:"args"}
                            {Source:"extends"}{
                                return extends/true
                            }
                        }
                    }
                }
            }
        }
    }
    
        static void Main(string[] args)
        {
            create.class.group("buildings"){
                class.vector(velocity: class = function("buildings"));
                Extends.deltaVelocity = 
                Source: token {args(add.string)}
                {
                    return if(Buildings){
                        extends Source: {Bool}
                        vector.Buildings.token{35};
                    }
                }
            }
        }
    }
}
using System;
using System.Collections.Generic;

namespace SoloLearn
{
    class Program
    {
        static void Main(string[] args)
        {
            Stack<int> s = new Stack<int>();
            
            s.Push(59);
            s.Push(72);
            s.Push(65);

            Console.Write("Stack: ");
            foreach (int i in s)
                Console.Write(i + " ");  // 65  72  59
            Console.Write("\nCount: " + s.Count);  // 3
            
            Console.Write("\nTop: " + s.Peek());  // 65
            Console.Write("\nPop: " + s.Pop());  // 65
            
            Console.Write("\nStack: ");
            foreach (int i in s)
                Console.Write(i + " ");  // 72  59
            Console.Write("\nCount: " + s.Count);  // 2
        }
    }
}
//python
from numpy import exp, array, random, dot

class neural_network:
    def __init__(self):
        random.seed(1)
        # We model a single neuron, with 3 inputs and 1 output and assign random weight.
        self.weights = 2 * random.random((2, 1)) - 1

    def train(self, inputs, outputs, num):
        for iteration in range(num):
            output = self.think(inputs)
            error = outputs - output
            adjustment = 0.01*dot(inputs.T, error)
            self.weights += adjustment

    def think(self, inputs):
        return (dot(inputs, self.weights))



neural_network = neural_network()

# The training set
inputs = array([[2, 3], [1, 1], [5, 2], [12, 3]])
outputs = array([[10, 4, 14, 30]]).T

# Training the neural network using the training set.
neural_network.train(inputs, outputs, 10000)

# Ask the neural network the output
print(neural_network.think(array([15, 2])))

from numpy import exp, array, random, dot

class neural_network:
    def __init__(self):
        random.seed(1)
        # We model a single neuron, with 3 inputs and 1 output and assign random weight.
        self.weights = 2 * random.random((3, 1)) - 1
        
    def __sigmoid(self, x):
        return 1 / (1 + exp(-x))

    def train(self, inputs, outputs, num):
        for iteration in range(num):
            output = self.think(inputs)
            error = outputs - output
            adjustment = dot(inputs.T, error * output*(1-output))
            self.weights += adjustment

    def think(self, inputs):
        result = self.__sigmoid(dot(inputs, self.weights))
        return result


network = neural_network()

# The training set
inputs = array([[1, 1, 0], [1, 0, 1], [0, 1, 1]])
outputs = array([[1, 1, 0]]).T

# Training the neural network using the training set.
network.train(inputs, outputs, 10000)

# Ask the neural network the output
print(network.think(array([1, 0, 0])))
      </script>
      <button class="changeDirectButton" onclick="controlsHandling()">change direction</button>
      <p id="directionFacing"></p>
    </body>
</html>
//html
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>
<!--header start-->
    <div class="container">
      <form>
        <div class="form-group">
          <label for="email">Email:</label>
          <input type="email" class="form-control" id="email">
        </div>
        <div class="form-group">
          <label for="info">Info:</label>
          <textarea class="form-control" rows="3" id="info"></textarea>
        </div>
        <div class="form-group">
          <label for="sellist">Select One:</label>
          <select class="form-control" id="sellist">
            <option>A</option>
            <option>B</option>
          </select>
        </div>
        <label class="radio-inline"><input type="radio" name="rb">Radio 1</label>
        <label class="radio-inline"><input type="radio" name="rb">Radio 2</label>
        <div class="checkbox">
          <label><input type="checkbox">Checkbox</label>
        </div>
        <!--header end-->
        <!--cols start-->
      </form>
    </div> 
    <br />
        <div class="container">
        <div class="row">
            <div class="col-xs-6">6 cols</div>
            <div class="col-xs-6">6 cols</div>
        </div>
        <div class="row">
            <div class="col-xs-4">4 cols</div>
            <div class="col-xs-8">8 cols</div>
        </div>
    </div>
    <!--cols end-->
    <!--buttons start-->
    <br />
       <div class="container">
        <button type="button" class="btn">Basic</button>
        <button type="button" class="btn btn-default">Default</button>
        <button type="button" class="btn btn-primary">Primary</button>
        <button type="button" class="btn btn-success">Success</button>
        <button type="button" class="btn btn-warning">Warning</button>
        <button type="button" class="btn btn-danger">Danger</button>
        <button type="button" class="btn btn-info">Info</button>
        <button type="button" class="btn btn-link">Link</button>
        
        <button type="button" class="btn btn-xs">Extra Small</button>
        <button type="button" class="btn btn-sm">Small</button>
        <button type="button" class="btn btn-md">Medium</button>
        <button type="button" class="btn btn-lg">Large</button>
        
        <button type="button" class="btn active">Enabled</button>
        <button type="button" class="btn disabled">Disabled</button>
        <button type="button" class="btn btn-block">Block</button>
    </div>
    <!--buttons end-->
    <br />
    <!--images start-->
        <div class="container">
        <img src="http://images.freeimages.com/images/large-previews/b3d/flowers-1375316.jpg" width="200" height="200" class="img-rounded"/><br><br>
        <img src="http://images.freeimages.com/images/large-previews/b3d/flowers-1375316.jpg" width="200" height="200" class="img-circle"/><br><br>
        <img src="http://images.freeimages.com/images/large-previews/b3d/flowers-1375316.jpg" width="200" height="200" class="img-thumbnail"/>
    </div>
    <!--images end-->
    <br />
    <!--footer start-->
        <div class="container">
        <h3>Miscellaneous <small>stuff</small></h3>
        <p class="bg-info">The Gutenberg Press 1454</p>
        <p class="text-success">revolutionized printing</p>
        <blockquote>
            <p>The only source of knowledge is experience.</p>
            <footer>Albert Einstein</footer>
        </blockquote>
        <p><kbd>Enter</kbd> is a <code>kbd</code> element</p>
        <p class="bg-warning text-center">Paragraph formats</p>
    </div>
    <!--footer end-->
</body>
</html>
<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <title>bot talking</title>
    </head>
    <body>
    <div id="body container">
    <div id="userid container">
    <img class ="id" src="https://code.sololearn.com/Icons/Avatars/0.jpg"><p>user id:</p>
    <p id="undefined">undefined</p>
    <p id="userid"></p>
    </div>
    <div id="register page">
    <div class="container">
      <button type="button" data-toggle="modal" data-target="#myModal">information</button>
      <div id="myModal" class="modal">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h3 class="modal-title" id="username"></h3>
              <button data-dismiss="modal">X</button>
            </div>
            <div class="modal-body">Body</div>
            <div class="modal-footer">Footer</div>
          </div>
        </div>
      </div>
    </div>
        <form onsubmit="return validate()" method="post">
       username: <input type="text" id ="usernameid"/><br />
       email: <input type="text" name="emailinput"/><br />
    password: <input type="text" id="num1" /><br />
    Repeat: <input type="text" id="num2" id="num2" /><br />
    <button type="button" onclick="register(), idcreater()">submit</button>
    <br />
        <ins id="register note" class="register">
        please register first!</ins>
        <p id="message"></p>
        <br />
        <br />
        <div id="bot">
        <button type="button" onclick="chatfuel()" class="btn btn-primary">chat with bot</button>
        <br />
        <br />
            <strong id="bot messages"></strong>
            <br />
            <br />
            <p id="idmessages"></p>
            <button class="ask"onclick="answer()">what is my id?</button>
            <p class="pointer">^^^^^</p>
                <p class="pointer">some question to ask bot</p>
        </div>
        </div>
        <script>
            function validate() {
    var n1 = document.getElementById("num1");
    var n2 = document.getElementById(num2);
    if(n1.value != '' && n2.value != '') {
        if(n1.value == n2.value) {
            return true;
        }
    }
    alert("The values should be equal and not blank");
    return false;
}
function register(){
    var id = document.getElementById("usernameid").value;
    document.getElementById("message").innerHTML = id + ", you have sign in!";
    var parent = document.getElementById("body container");
    var node = document.getElementById("register note");
    parent.removeChild(node)
    document.getElementById("username").innerHTML =
    "username: " + id;
}
function chatfuel(){
var username = document.getElementById("usernameid").value;
    document.getElementById("bot messages").innerHTML = "hi " + username + ", i'm mike!";
}
function idcreater(){ 
var parent = document.getElementById("userid container");
var child = document.getElementById("undefined");
parent.removeChild(child)
var id2 = Math.random(72287)
var id3 = Math.random(62867)
var id4 = Math.random(9999)
var bonusid = Math.random(5799)
var bonusid2 = Math.random(72926)
var id1 = id2 + id3 + id4 + bonusid
   document.getElementById("userid").innerHTML = id1;
   }
function answer(){
var id1 = document.getElementById("userid").value;
    document.getElementById("idmessages").innerHTML = "your id is:" + id1;
}
        </script>
    </body>
</html>
<!DOCTYPE html>
<html>
    <head>
        <title>My Blog</title>
        <link href="https://fonts.googleapis.com/css?family=Handlee" rel="stylesheet">
    </head>
    
    <body>
        <!-- header start -->
        <div id="header" class="section">
            <img alt="" class="img-circle" src="https://code.sololearn.com/Icons/Avatars/0.jpg">
            <p>Alex Simpson</p>
        </div>
        <!-- header end -->
        
        <!-- About Me section start -->
        <div class="section">
            <h1><span>About Me</span></h1>
            <p>
                Hey! I'm <strong>Alex</strong>. Coding has changed my world. It's not just about apps. Learning to code gave me <i>problem-solving skills</i> and a way to communicate with others on a technical level. I can also develop websites and use my coding skills to get a better job. And I learned it all at <strong>SoloLearn</strong> where they build your self-esteem and keep you motivated. Join me in this rewarding journey. You'll have fun, get help, and learn along the way!
            </p>
            <p class="quote">"Declare variables, not war"</p>
        </div>
        <!-- About Me section end -->
        
        <!-- My Schedule section start -->
        <div class="section">
            <h1><span>My Coding Schedule</span></h1>
            <table>
                <tr>
                    <th>Day</th>
                    <th>Mon</th>
                    <th>Tue</th>
                    <th>Wed</th>
                    <th>Thu</th>
                    <th>Fri</th>
                </tr>
                <tr>
                    <td>8-8:30</td>
                    <td class="selected">Learn</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>9-10</td>
                    <td></td>
                    <td class="selected">Practice</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>1-1:30</td>
                    <td></td>
                    <td></td>
                    <td class="selected">Play</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>3:45-5</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class="selected">Code</td>
                    <td></td>
                </tr>
                <tr>
                    <td>6-6:15</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class="selected">Discuss</td>
                </tr>
            </table>
        </div>
        <!-- My Schedule section end -->
        
        
        <!-- My Skills section start -->
        <div class="section">
            <h1><span>My Skills</span></h1>
            <ul>
                <li>HTML <br />
                    <progress min="0" max="100" value="80"></progress>
                </li>
                <li>JavaScript <br />
                    <progress min="0" max="100" value="50"></progress>
                </li>
                <li>Python <br />
                    <progress min="0" max="100" value="30"></progress>
                </li>
            </ul>
        </div>
        <!-- My Skills section end -->
        
        
         <!-- Media section start -->
        <div class="section">
            <h1><span>My Media</span></h1>
            <iframe height="150" width="300" src="https://www.youtube.com/embed/Q6_5InVJZ88" allowfullscreen frameborder="0"></iframe>
        </div>
        <!-- Media section end -->
        
        <!-- Form section start -->
       <div class="section">
            <h1><span>Contact Me</span></h1>
            
            <svg class="face" height="100" width="100">
                <circle cx="50" cy="50" r="50" fill="#FDD835"/>
                <circle cx="30" cy="30" r="10" fill="#FFFFFF"/>
                <circle cx="70" cy="30" r="10" fill="#FFFFFF"/>
                <circle cx="30" cy="30" r="5" fill="#000000"/>
                <circle cx="70" cy="30" r="5" fill="#000000"/>
                <path d="M 30 70 q 20 20 40 0" stroke="#FFFFFF" stroke-width="5" fill="none" />
            </svg>
                 
            <form>
                <input name="name" placeholder="Name" type="text" required /><br/>
                <input name="email" placeholder="Email" type="email" required /><br/>
                <textarea name="message" placeholder="Message" required ></textarea>
                <input type="submit" value="SEND" class="submit" />
            </form>
        </div>
        <!-- Form section end -->
        
        <!-- Contacts section start -->
        <div class="section" id="contacts">
            <h1><span>Follow Me</span></h1>
            <div>
                <a
                 href="https://www.sololearn.com/" target="_blank">
                    <img alt="SoloLearn" src="https://www.sololearn.com/Uploads/icons/sololearn.png" />
                </a>
                <a href="#">
                    <img alt="Facebook" src="https://www.sololearn.com/Uploads/icons/facebook.png"/>
                </a>
                <a href="#">
                    <img alt="Twitter" src="https://www.sololearn.com/Uploads/icons/twitter.png" />
                </a>
            </div>
        </div>
        <!-- Contacts section end -->
        
        <div class="copyright">
            &copy; 2017 My Blog. All rights reserved.
        </div>
        
    </body>
</html>
